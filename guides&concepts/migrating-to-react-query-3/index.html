<!doctype html>
<html lang="cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=0.86,maximum-scale=3,minimum-scale=0.86">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<meta content="React Query,React,Query,React Queryä¸­æ–‡,ä¸­æ–‡æ–‡æ¡£,æ•°æ®åŒæ­¥" name="Keywords">
<title data-react-helmet="true">è¿ç§»åˆ°React Query 3 | React Query ä¸­æ–‡æ–‡æ¡£</title><meta data-react-helmet="true" property="og:url" content="https://cangsdarm.github.io/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3"><meta data-react-helmet="true" name="docusaurus_locale" content="cn"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="è¿ç§»åˆ°React Query 3 | React Query ä¸­æ–‡æ–‡æ¡£"><meta data-react-helmet="true" name="description" content="ä»¥å‰ç‰ˆæœ¬çš„ React Query å¾ˆæ£’ï¼Œå¹¶ä¸ºåº“å¸¦æ¥äº†ä¸€äº›æƒŠäººçš„æ–°ç‰¹æ€§ã€æ›´å¤šçš„é­”åŠ›ä»¥åŠæ›´å¥½çš„æ•´ä½“ä½“éªŒã€‚"><meta data-react-helmet="true" property="og:description" content="ä»¥å‰ç‰ˆæœ¬çš„ React Query å¾ˆæ£’ï¼Œå¹¶ä¸ºåº“å¸¦æ¥äº†ä¸€äº›æƒŠäººçš„æ–°ç‰¹æ€§ã€æ›´å¤šçš„é­”åŠ›ä»¥åŠæ›´å¥½çš„æ•´ä½“ä½“éªŒã€‚"><link data-react-helmet="true" rel="shortcut icon" href="/react-query-web-i18n/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://cangsdarm.github.io/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3"><link data-react-helmet="true" rel="alternate" href="https://cangsdarm.github.io/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3" hreflang="cn"><link data-react-helmet="true" rel="alternate" href="https://cangsdarm.github.io/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3" hreflang="x-default"><link rel="stylesheet" href="/react-query-web-i18n/assets/css/styles.06674701.css">
<link rel="preload" href="/react-query-web-i18n/assets/js/runtime~main.5a34c61e.js" as="script">
<link rel="preload" href="/react-query-web-i18n/assets/js/main.614dafff.js" as="script">
<meta name="google-site-verification" content="Qa9IAETG_rUMzy5ZXHjOxjAK7awElBSO6p_XVLGzuZk">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EGJ5SQ3RN3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EGJ5SQ3RN3")</script>
</head>
<body itemscope="" itemtype="http://schema.org/Organization">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/react-query-web-i18n/"><img src="/react-query-web-i18n/img/logo.svg" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/react-query-web-i18n/img/logo.svg" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">React Query ä¸­æ–‡æ–‡æ¡£</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/react-query-web-i18n/">æ–‡æ¡£</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">å®˜æ–¹èµ„æºï¼ˆè‹±æ–‡ï¼‰</a><ul class="dropdown__menu"><li><a href="https://react-query.tanstack.com/examples/simple" target="_blank" rel="noopener noreferrer" class="dropdown__link">ç¤ºä¾‹</a></li><li><a href="https://learn.tanstack.com/p/react-query-essentials" target="_blank" rel="noopener noreferrer" class="dropdown__link">å­¦ä¹ </a></li><li><a href="https://github.com/tannerlinsley/react-query" target="_blank" rel="noopener noreferrer" class="dropdown__link">Github</a></li></ul></div><a href="https://github.com/cangSDARM/react-query-web-i18n" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/react-query-web-i18n/"><img src="/react-query-web-i18n/img/logo.svg" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/react-query-web-i18n/img/logo.svg" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">React Query ä¸­æ–‡æ–‡æ¡£</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/react-query-web-i18n/">æ–‡æ¡£</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">å®˜æ–¹èµ„æºï¼ˆè‹±æ–‡ï¼‰</a><ul class="menu__list"><li class="menu__list-item"><a href="https://react-query.tanstack.com/examples/simple" target="_blank" rel="noopener noreferrer" class="menu__link">ç¤ºä¾‹</a></li><li class="menu__list-item"><a href="https://learn.tanstack.com/p/react-query-essentials" target="_blank" rel="noopener noreferrer" class="menu__link">å­¦ä¹ </a></li><li class="menu__list-item"><a href="https://github.com/tannerlinsley/react-query" target="_blank" rel="noopener noreferrer" class="menu__link">Github</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/cangSDARM/react-query-web-i18n" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">å‡†å¤‡å¼€å§‹</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/">æ¦‚è§ˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/installation">å®‰è£…</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/quick-start">å¿«é€Ÿå…¥é—¨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/devtools">å¼€å‘è°ƒè¯•å·¥å…·</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/videos">è§†é¢‘æ•™ç¨‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/comparison">æ¯”è¾ƒ | React Query vs SWR vs Apollo vs RTK Query</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/typescript">TypeScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/graphql">GraphQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/react-native">React Native</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">æŒ‡å—&amp;æ¦‚å¿µ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/important-defaults">é‡è¦çš„é»˜è®¤é…ç½®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/queries">æŸ¥è¯¢</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/query-keys">æŸ¥è¯¢çš„é”®å€¼</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/query-functions">æŸ¥è¯¢å‡½æ•°</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/parallel-queries">å¹¶è¡ŒæŸ¥è¯¢</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/dependent-queries">æœ‰ä¾èµ–çš„æŸ¥è¯¢</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/background-fetching-indicators">åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/window-focus-refetching">çª—å£ç„¦ç‚¹å½±å“çš„æ•°æ®åˆ·æ–°</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/disabling-queries">ç¦ç”¨/æš‚åœæŸ¥è¯¢</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/query-retries">æŸ¥è¯¢é‡è¯•</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/paginated-queries">åˆ†é¡µ/æ»åæŸ¥è¯¢</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/infinite-queries">æ— é™æŸ¥è¯¢</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/placeholder-query-data">æŸ¥è¯¢æ•°æ®å ä½ç¬¦</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/initial-query-data">åˆå§‹åŒ–çš„æŸ¥è¯¢æ•°æ®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/prefetching">é¢„å–æ•°æ®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/mutations">ä¿®æ”¹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/query-invalidation">æŸ¥è¯¢å¤±æ•ˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/invalidation-from-mutations">ä¿®æ”¹å¯¼è‡´çš„å¤±æ•ˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/updates-from-mutation-responses">å“åº”æ›´æ–°çš„æ•°æ®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/optimistic-updates">ä¹è§‚æ›´æ–°</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/query-cancellation">æŸ¥è¯¢å–æ¶ˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/scroll-restoration">æ»šåŠ¨æ¢å¤</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/filters">è¿‡æ»¤å™¨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/ssr">SSR</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/caching">ç¼“å­˜ç¤ºä¾‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/default-query-function">é»˜è®¤çš„æŸ¥è¯¢å‡½æ•°</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/suspense">Suspense</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/testing">æµ‹è¯•</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/does-this-replace-client-state">React Queryæ˜¯å¦ä¼š/å¯ä»¥å–ä»£Reduxï¼ŒMobXæˆ–å…¶ä»–å…¨å±€çŠ¶æ€ç®¡ç†å™¨ï¼Ÿ</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3">è¿ç§»åˆ°React Query 3</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">èŒƒä¾‹</a><ul class="menu__list"><li class="menu__list-item"><a href="https://react-query.tanstack.com/examples/simple" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="0">å®˜æ–¹ç¤ºä¾‹</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">æ’ä»¶</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/plugins/broadcast-query-client">broadcastQueryClient (Experimental)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/plugins/createAsyncStoragePersistor">createAsyncStoragePersistor (Experimental)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/plugins/createWebStoragePersistor">createWebStoragePersistor (Experimental)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/plugins/persist-query-client">persistQueryClient (Experimental)</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">APIå‚è€ƒ</a><ul class="menu__list"><li class="menu__list-item"><a href="https://react-query.tanstack.com/reference/useQuery" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="0">ç­‰å¾…ç¿»è¯‘...</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/doc_template">å¯¹è´¡çŒ®è€…å†™çš„æ–‡æ¡£è§„èŒƒ</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">è¿ç§»åˆ°React Query 3</h1></header><div class="markdown"><p>ä»¥å‰ç‰ˆæœ¬çš„ React Query å¾ˆæ£’ï¼Œå¹¶ä¸ºåº“å¸¦æ¥äº†ä¸€äº›æƒŠäººçš„æ–°ç‰¹æ€§ã€æ›´å¤šçš„é­”åŠ›ä»¥åŠæ›´å¥½çš„æ•´ä½“ä½“éªŒã€‚
ç¤¾åŒºè¿˜ä¸º React Query å¸¦æ¥äº†è®¸å¤šå»ºè®®ï¼ŒåŒæ ·ä¹Ÿå¸¦æ¥äº†å¯¹ React Query çš„å¤§é‡æ”¹è¿›ï¼ˆissues/contributionsï¼‰ã€‚
v3 ç‰ˆæœ¬ merge äº†è®¸å¤šæ€§èƒ½ä¼˜åŒ–å’Œ API è°ƒä¼˜çš„å†…å®¹ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ¦‚è§ˆ"></a>æ¦‚è§ˆ<a class="hash-link" href="#æ¦‚è§ˆ" title="Direct link to heading">#</a></h2><ul><li>æ›´å…·å¯æ‰©å±•æ€§å’Œå¯æµ‹è¯•æ€§çš„ç¼“å­˜é…ç½®</li><li>æ›´å¥½çš„ SSR æ”¯æŒ</li><li>å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹çš„æ•°æ®å»¶è¿Ÿ(Data-lagï¼Œä»¥å‰çš„ usePaginatedQuery)</li><li>åŒå‘(Bi-directional)æ— é™æŸ¥è¯¢</li><li>æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨ï¼</li><li>åœ¨ä½¿ç”¨å‰ä¸ºæŸ¥è¯¢å’Œ/æˆ–ä¿®æ”¹é…ç½®å®Œæ•´çš„é»˜è®¤å€¼</li><li>æ›´åŠ ç»†ç²’åº¦çš„å¯é€‰æ¸²æŸ“ä¼˜åŒ–</li><li>æ–°ç”¨é€” <code>useQueries</code> Hookï¼ï¼ˆå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢ï¼‰</li><li>æŸ¥è¯¢è¿‡æ»¤å™¨å¯¹ <code>useIsFetching()</code> Hook çš„æ”¯æŒï¼</li><li>ä¿®æ”¹å¯¹äºé‡è¯•/ç¦»çº¿/é‡æ”¾çš„æ”¯æŒ</li><li>ä¿®æ”¹/æŸ¥è¯¢å¯ä»¥åœ¨ React ä¹‹å¤–å®ç°è§‚å¯Ÿè€…æ¨¡å¼</li><li>éšæ—¶éšåœ°ä½¿ç”¨ React Query æ ¸å¿ƒé€»è¾‘ï¼</li><li>é€šè¿‡ä½¿ç”¨<code>react-query/devtools</code>ï¼Œéšæ—¶äº«å— Devtools</li><li>æŒä¹…åŒ–ç¼“å­˜åˆ° webçš„å­˜å‚¨ ä¸­ (<em>å®éªŒæ€§</em>ï¼Œ <code>react-query/persistQueryClient-experimental</code> å’Œ <code>react-query/createWebStoragePersistor-experimental</code>)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç ´åæ€§ä¿®æ”¹"></a>ç ´åæ€§ä¿®æ”¹<a class="hash-link" href="#ç ´åæ€§ä¿®æ”¹" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="querycache-å·²è¢«åˆ†è§£è¿›-queryclient-å’Œè¾ƒä½çº§åˆ«çš„-querycache-å’Œ-mutationcache-å®ä¾‹ã€‚"></a>QueryCache å·²è¢«åˆ†è§£è¿› <code>QueryClient</code> å’Œè¾ƒä½çº§åˆ«çš„ <code>QueryCache</code> å’Œ <code>MutationCache</code> å®ä¾‹ã€‚<a class="hash-link" href="#querycache-å·²è¢«åˆ†è§£è¿›-queryclient-å’Œè¾ƒä½çº§åˆ«çš„-querycache-å’Œ-mutationcache-å®ä¾‹ã€‚" title="Direct link to heading">#</a></h3><p><code>QueryCache</code> åŒ…å«æ‰€æœ‰æŸ¥è¯¢ï¼Œ<code>MutationCache</code> åŒ…å«æ‰€æœ‰ä¿®æ”¹ï¼Œè€Œ <code>QueryClient</code> å¯ç”¨äºè®¾ç½®é…ç½®å¹¶ä¸å…¶è¿›è¡Œäº¤äº’ã€‚</p><p>è¿™å¸¦æ¥äº†ä¸€äº›å¥½å¤„ï¼š</p><ul><li>å…è®¸ä½¿ç”¨ä¸åŒç±»å‹çš„ç¼“å­˜</li><li>å…·æœ‰ä¸åŒé…ç½®çš„å¤šä¸ª clinet å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç¼“å­˜</li><li>Clinets å¯ä»¥è·Ÿè¸ªæŸ¥è¯¢ï¼Œè¿™äº›æŸ¥è¯¢å¯ç”¨åœ¨ SSR ä¸Šå…±äº«ç¼“å­˜</li><li>å®¢æˆ·ç«¯ API æ›´ä¾§é‡äºä¸€èˆ¬ç”¨æ³•</li><li>æ›´å®¹æ˜“è¿›è¡Œç‹¬ç«‹äºå„ä¸ªç»„ä»¶çš„æµ‹è¯•</li></ul><p>å½“ <code>new QueryClient()</code> æ—¶ï¼Œå¦‚æœä¸æä¾› <code>QueryCache</code> å’Œ <code>MutationCache</code> å¯¹è±¡ï¼Œåˆ™ä¼šè‡ªåŠ¨ä¸ºæ‚¨åˆ›å»º</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">QueryClient</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> queryClient </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">QueryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reactqueryconfigprovider-å’Œ-reactquerycacheprovider-å·²è¢«-queryclientprovider-æ›¿ä»£"></a><code>ReactQueryConfigProvider</code> å’Œ <code>ReactQueryCacheProvider</code> å·²è¢« <code>QueryClientProvider</code> æ›¿ä»£<a class="hash-link" href="#reactqueryconfigprovider-å’Œ-reactquerycacheprovider-å·²è¢«-queryclientprovider-æ›¿ä»£" title="Direct link to heading">#</a></h3><p>ç°åœ¨å¯ä»¥åœ¨ <code>QueryClient</code> ä¸­æŒ‡å®šæŸ¥è¯¢å’Œä¿®æ”¹çš„é»˜è®¤å‚æ•°ï¼š</p><p><strong>æ³¨æ„ï¼Œç°åœ¨è¿™æ˜¯ä¸€ä¸ªé»˜è®¤é€‰é¡¹(defaultOptions)ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé»˜è®¤é…ç½®(defaultConfig)</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> queryClient </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">QueryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  defaultOptions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    queries</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// query options</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    mutations</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// mutation options</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>QueryClientProvider</code> ç»„ä»¶ç°åœ¨ç”¨äºå°† <code>QueryClient</code> è¿æ¥åˆ°åº”ç”¨ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">QueryClient</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">QueryClientProvider</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> queryClient </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">QueryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">App</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">QueryClientProvider</span><span class="token plain"> client</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token maybe-class-name">QueryClientProvider</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="é»˜è®¤çš„-querycache-å·²è¢«ç§»é™¤ï¼Œå½»åº•"></a>é»˜è®¤çš„ <code>QueryCache</code> å·²è¢«ç§»é™¤ï¼Œå½»åº•<a class="hash-link" href="#é»˜è®¤çš„-querycache-å·²è¢«ç§»é™¤ï¼Œå½»åº•" title="Direct link to heading">#</a></h3><p>å¦‚å…ˆå‰æ‰€æåˆ°çš„ï¼Œä¸å†æœ‰ä»ä¸»åŒ…åˆ›å»ºæˆ–å¯¼å‡ºçš„é»˜è®¤ <code>QueryCache</code>ã€‚
ä½ å¿…é¡»é€šè¿‡ <code>new QueryClient()</code> æˆ– <code>new QueryCache()</code> è‡ªå·±åˆ›å»ºä¸€ä¸ªï¼ˆåä¸€ä¸ªå¯ä»¥ç¨åé€šè¿‡ <code>new QueryClient({ queryCache })</code> ä¼ å…¥ï¼‰</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä¸æ¨èä½¿ç”¨çš„-makequerycache-å·²è¢«åˆ é™¤"></a>ä¸æ¨èä½¿ç”¨çš„ <code>makeQueryCache</code> å·²è¢«åˆ é™¤<a class="hash-link" href="#ä¸æ¨èä½¿ç”¨çš„-makequerycache-å·²è¢«åˆ é™¤" title="Direct link to heading">#</a></h3><p>å·²ç»æœ‰å¾ˆé•¿æ—¶é—´äº†ï¼Œä½†æ˜¯ç»ˆäºæ¶ˆå¤±äº† :)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="querycacheprefetchquery-è¢«-queryclientprefetchquery-æ›¿ä»£"></a><code>QueryCache.prefetchQuery()</code> è¢« <code>QueryClient.prefetchQuery()</code> æ›¿ä»£<a class="hash-link" href="#querycacheprefetchquery-è¢«-queryclientprefetchquery-æ›¿ä»£" title="Direct link to heading">#</a></h3><p>æ–°çš„ <code>QueryClient.prefetchQuery()</code> å‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œä½†<strong>ä¸ä¼šä»æŸ¥è¯¢ä¸­è¿”å›æ•°æ®</strong>ã€‚å¦‚æœä½ éœ€è¦æ•°æ®ï¼Œä½¿ç”¨æ–°çš„ <code>QueryClient.fetchQuery()</code> å‡½æ•°</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Prefetch a query:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">prefetchQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Fetch a query:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fetchQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// é”™è¯¯å¤„ç†</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reactqueryerrorresetboundary-å’Œ-querycachereseterrorboundaries-è¢«-queryerrorresetboundary-å’Œ-usequeryerrorresetboundary-æ›¿ä»£"></a><code>ReactQueryErrorResetBoundary</code> å’Œ <code>QueryCache.resetErrorBoundaries()</code> è¢« <code>QueryErrorResetBoundary</code> å’Œ <code>useQueryErrorResetBoundary()</code> æ›¿ä»£<a class="hash-link" href="#reactqueryerrorresetboundary-å’Œ-querycachereseterrorboundaries-è¢«-queryerrorresetboundary-å’Œ-usequeryerrorresetboundary-æ›¿ä»£" title="Direct link to heading">#</a></h3><p>å®ƒä»¬ä¸€èµ·æä¾›äº†ä¸ä»¥å‰ç›¸åŒçš„ä½“éªŒï¼Œä½†å¢åŠ äº†å¯¹æ‰‹åŠ¨é€‰æ‹©è¦é‡ç½®çš„ç»„ä»¶æ ‘çš„æ§åˆ¶ã€‚
æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ï¼š</p><ul><li><a href="/react-query-web-i18n/reference/QueryErrorResetBoundary">QueryErrorResetBoundary</a></li><li><a href="/react-query-web-i18n/reference/useQueryErrorResetBoundary">useQueryErrorResetBoundary</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="querycachegetquery-è¢«-querycachefind-æ›¿ä»£"></a><code>QueryCache.getQuery()</code> è¢« <code>QueryCache.find()</code> æ›¿ä»£<a class="hash-link" href="#querycachegetquery-è¢«-querycachefind-æ›¿ä»£" title="Direct link to heading">#</a></h3><p><code>QueryCache.find()</code> ç°åœ¨ç”¨äºä»ä¸€ä¸ªç¼“å­˜ä¸­æŸ¥æ‰¾å•ä¸ªæŸ¥è¯¢</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="querycachegetqueries-åˆå¹¶è¿›-querycachefindall"></a><code>QueryCache.getQueries()</code> åˆå¹¶è¿› <code>QueryCache.findAll()</code><a class="hash-link" href="#querycachegetqueries-åˆå¹¶è¿›-querycachefindall" title="Direct link to heading">#</a></h3><p><code>QueryCache.findAll()</code> ç°åœ¨ç”¨äºä»ä¸€ä¸ªç¼“å­˜ä¸­æŸ¥æ‰¾å¤šä¸ªæŸ¥è¯¢</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="querycacheisfetching-åˆå¹¶è¿›-queryclientisfetching"></a><code>QueryCache.isFetching</code> åˆå¹¶è¿› <code>QueryClient.isFetching()</code><a class="hash-link" href="#querycacheisfetching-åˆå¹¶è¿›-queryclientisfetching" title="Direct link to heading">#</a></h3><p><strong>è¯·æ³¨æ„ï¼Œå®ƒç°åœ¨æ˜¯ä½œä¸ºå‡½æ•°è€Œä¸æ˜¯å±æ€§å­˜åœ¨</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="usequerycache-hook-è¢«-usequeryclient-hook-æ›¿ä»£"></a><code>useQueryCache</code> hook è¢« <code>useQueryClient</code> hook æ›¿ä»£<a class="hash-link" href="#usequerycache-hook-è¢«-usequeryclient-hook-æ›¿ä»£" title="Direct link to heading">#</a></h3><p>å®ƒè¿”å›ä¸ºç»„ä»¶æ ‘ä¸­æä¾›çš„ <code>queryClient</code>ï¼Œé™¤äº†é‡å‘½åå¤–æ— éœ€è¿›è¡Œå¤ªå¤šè°ƒæ•´ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æŸ¥è¯¢çš„é”®å€¼éƒ¨åˆ†ä¸å†ä½œä¸ºå‚æ•°è‡ªåŠ¨ä¼ é€’åˆ°æŸ¥è¯¢å‡½æ•°"></a>æŸ¥è¯¢çš„é”®å€¼éƒ¨åˆ†ä¸å†ä½œä¸ºå‚æ•°è‡ªåŠ¨ä¼ é€’åˆ°æŸ¥è¯¢å‡½æ•°<a class="hash-link" href="#æŸ¥è¯¢çš„é”®å€¼éƒ¨åˆ†ä¸å†ä½œä¸ºå‚æ•°è‡ªåŠ¨ä¼ é€’åˆ°æŸ¥è¯¢å‡½æ•°" title="Direct link to heading">#</a></h3><p>ç°åœ¨å»ºè®®ä½¿ç”¨é—­åŒ…å°†å‚æ•°ä¼ é€’ç»™æŸ¥è¯¢å‡½æ•°ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Old</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">_key</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchPost</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// New</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchPost</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¦‚æœä»ç„¶åšæŒä¸ä½¿ç”¨é—­åŒ…ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ–°çš„ <code>QueryFunctionContext</code>ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchPost</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">queryKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ— é™æŸ¥è¯¢çš„åˆ†é¡µå‚æ•°ç°åœ¨ä½¿ç”¨-queryfunctioncontextpageparam-ä¼ é€’"></a>æ— é™æŸ¥è¯¢çš„åˆ†é¡µå‚æ•°ç°åœ¨ä½¿ç”¨ <code>QueryFunctionContext.pageParam</code> ä¼ é€’<a class="hash-link" href="#æ— é™æŸ¥è¯¢çš„åˆ†é¡µå‚æ•°ç°åœ¨ä½¿ç”¨-queryfunctioncontextpageparam-ä¼ é€’" title="Direct link to heading">#</a></h3><p>å®ƒä»¬ä»¥å‰æ˜¯ä½œä¸ºæŸ¥è¯¢å‡½æ•°ä¸­çš„æœ€åä¸€ä¸ªå‚æ•°æ·»åŠ çš„ï¼Œä½†äº‹å®è¯æ˜ï¼Œè¿™å¯¹äºå®ç°æŸäº›æ¨¡å¼å¾ˆæ˜¯å›°éš¾</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Old</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useInfiniteQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">_key</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> pageParam </span><span class="token parameter operator" style="color:rgb(137, 221, 255)">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pageParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// New</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useInfiniteQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> pageParam </span><span class="token parameter operator" style="color:rgb(137, 221, 255)">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:rgb(247, 140, 108)">0</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pageParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä¸æ¨èä½¿ç”¨-usepaginatedqueryï¼Œè€Œæ˜¯åº”è¯¥é€‰æ‹©-keeppreviousdata-å‚æ•°"></a>ä¸æ¨èä½¿ç”¨ <code>usePaginatedQuery()</code>ï¼Œè€Œæ˜¯åº”è¯¥é€‰æ‹© <code>keepPreviousData</code> å‚æ•°<a class="hash-link" href="#ä¸æ¨èä½¿ç”¨-usepaginatedqueryï¼Œè€Œæ˜¯åº”è¯¥é€‰æ‹©-keeppreviousdata-å‚æ•°" title="Direct link to heading">#</a></h3><p>æ–°çš„ <code>keepPreviousData</code> é€‰é¡¹å¯ç”¨äº <code>useQuery</code> å’Œ <code>useInfiniteQuery</code>ï¼Œå®ƒä»¬å¯¹äºæ•°æ®å…·æœ‰ç›¸åŒçš„â€œæ»åâ€æ•ˆæœï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useQuery </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> page </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;page&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    keepPreviousData</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="useinfinitequery-ç°åœ¨æ˜¯åŒå‘çš„"></a><code>useInfiniteQuery()</code> ç°åœ¨æ˜¯åŒå‘çš„<a class="hash-link" href="#useinfinitequery-ç°åœ¨æ˜¯åŒå‘çš„" title="Direct link to heading">#</a></h3><p><code>useInfiniteQuery()</code> çš„ç›¸å…³æ¥å£å·²æ›´æ”¹ä¸ºå®Œå…¨æ”¯æŒåŒå‘æ— é™åˆ—è¡¨ã€‚</p><ul><li><code>options.getFetchMore</code> é‡å‘½åä¸º <code>options.getNextPageParam</code></li><li><code>queryResult.canFetchMore</code> é‡å‘½åä¸º <code>queryResult.hasNextPage</code></li><li><code>queryResult.fetchMore</code> é‡å‘½åä¸º <code>queryResult.fetchNextPage</code></li><li><code>queryResult.isFetchingMore</code> é‡å‘½åä¸º <code>queryResult.isFetchingNextPage</code></li><li>æ·»åŠ æ–°çš„ <code>options.getPreviousPageParam</code> é€‰é¡¹</li><li>æ·»åŠ æ–°çš„ <code>queryResult.hasPreviousPage</code> å±æ€§</li><li>æ·»åŠ æ–°çš„ <code>queryResult.fetchPreviousPage</code> å±æ€§</li><li>æ·»åŠ æ–°çš„ <code>queryResult.isFetchingPreviousPage</code></li><li>æ— å°½æŸ¥è¯¢çš„ <code>data</code> ç°åœ¨æ˜¯ä¸€ä¸ªåŒ…è£¹äº† <code>pages</code> å’Œ <code>pageParams</code> çš„<strong>å¯¹è±¡</strong>ï¼Œç”¨äºè·å–åˆ†é¡µæ•°æ®ï¼š <code>{ pages: [data, data, data], pageParams: [...]}</code></li></ul><p>ä¸€ä¸ªæ–¹å‘ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fetchNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  hasNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  isFetchingNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useInfiniteQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;projects&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> pageParam </span><span class="token parameter operator" style="color:rgb(137, 221, 255)">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:rgb(247, 140, 108)">0</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchProjects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pageParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getNextPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">lastPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> lastPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">nextCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åŒå‘ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fetchNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fetchPreviousPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  hasNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  hasPreviousPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  isFetchingNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  isFetchingPreviousPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useInfiniteQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;projects&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> pageParam </span><span class="token parameter operator" style="color:rgb(137, 221, 255)">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:rgb(247, 140, 108)">0</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchProjects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pageParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getNextPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">lastPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> lastPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">nextCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getPreviousPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">firstPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> firstPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prevCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åå‘ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fetchNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  hasNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  isFetchingNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useInfiniteQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;projects&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> pageParam </span><span class="token parameter operator" style="color:rgb(137, 221, 255)">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:rgb(247, 140, 108)">0</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchProjects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pageParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">select</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      pages</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">reverse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      pageParams</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">pageParams</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">reverse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getNextPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">lastPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> lastPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">nextCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç°åœ¨ï¼Œæ— é™æŸ¥è¯¢æ•°æ®åŒ…å«é¡µé¢æ•°ç»„å’Œç”¨äºè·å–è¿™äº›é¡µé¢çš„-pageparams"></a>ç°åœ¨ï¼Œæ— é™æŸ¥è¯¢æ•°æ®åŒ…å«é¡µé¢æ•°ç»„å’Œç”¨äºè·å–è¿™äº›é¡µé¢çš„ pageParams<a class="hash-link" href="#ç°åœ¨ï¼Œæ— é™æŸ¥è¯¢æ•°æ®åŒ…å«é¡µé¢æ•°ç»„å’Œç”¨äºè·å–è¿™äº›é¡µé¢çš„-pageparams" title="Direct link to heading">#</a></h3><p>è¿™æ ·å¯ä»¥æ›´è½»æ¾åœ°æ“ä½œæ•°æ®å’Œé¡µé¢å‚æ•°ï¼Œä¾‹å¦‚ï¼Œåˆ é™¤æ•°æ®çš„ç¬¬ä¸€é¡µåŠå…¶ç›¸å…³çš„å‚æ•°ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">setQueryData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;projects&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  pages</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">slice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  pageParams</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">pageParams</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">slice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="usemutation-ç°åœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„"></a><code>useMutation</code> ç°åœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„<a class="hash-link" href="#usemutation-ç°åœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„" title="Direct link to heading">#</a></h3><p>å°½ç®¡æ—§çš„æ¥å£ç»™æˆ‘ä»¬å¸¦æ¥äº†ç±»ä¼¼äºåˆæ¬¡å‘ç° <code>useState</code> æ—¶äº§ç”Ÿçš„é‚£ç§æ¸©æš–ä½†æ¨¡ç³Šçš„æ„Ÿè§‰ï¼Œä½†æ˜¯è¿™ç§æ„Ÿè§‰å¹¶æ²¡æœ‰æŒç»­å¤šä¹…ã€‚
ç°åœ¨ï¼Œå®ƒè¿”å›æ˜¯å•ä¸ªå¯¹è±¡ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Old:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">mutate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> reset </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// New:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> mutate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> reset </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="mutationmutate-ä¸å†è¿”å›ä¸€ä¸ª-promise"></a><code>mutation.mutate</code> ä¸å†è¿”å›ä¸€ä¸ª Promise<a class="hash-link" href="#mutationmutate-ä¸å†è¿”å›ä¸€ä¸ª-promise" title="Direct link to heading">#</a></h3><ul><li><code>[mutate]</code> å˜é‡å·²æ›¿æ¢ä¸º <code>mutation.mutate</code> å‡½æ•°</li><li>æ·»åŠ æ–°çš„ <code>mutation.mutateAsync</code> å‡½æ•°</li></ul><p>æˆ‘ä»¬æ”¶åˆ°äº†è®¸å¤šé—®é¢˜åé¦ˆï¼Œå› ä¸ºç”¨æˆ·å¸Œæœ›è¿™ä¸ª Promise çš„è¡Œä¸ºè¡¨ç°å¾—åƒä¸€ä¸ªæ­£å¸¸çš„ Promise</p><p>ç°åœ¨è¿™ä¸ª <code>mutate</code> å‡½æ•°è¢«åˆ†è§£ä¸º <code>mutate</code> å’Œ <code>mutateAsync</code> å‡½æ•°</p><p>å› è€Œï¼Œç°åœ¨ <code>mutate</code> å‡½æ•°çš„æ¥å£ä¸ºå›è°ƒå‡½æ•°å¼ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">addTodo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mutate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;todo&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">onSuccess</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">onError</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">onSettled</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;settled&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¼‚æ­¥æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨ <code>mutateAsync</code> å‡½æ•°ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> mutateAsync </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">addTodo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mutateAsync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;todo&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;settled&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="usequery-é…ç½®æ–¹å¼æ”¹å˜"></a><code>useQuery</code> é…ç½®æ–¹å¼æ”¹å˜<a class="hash-link" href="#usequery-é…ç½®æ–¹å¼æ”¹å˜" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Old:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  config</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> staleTime</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">Infinity</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// New:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  staleTime</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">Infinity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å¦‚æœè®¾ç½®ï¼Œåˆ™-queryoptionsenabled-é€‰é¡¹å¿…é¡»ä¸ºå¸ƒå°”å€¼-truefalse"></a>å¦‚æœè®¾ç½®ï¼Œåˆ™ <code>QueryOptions.enabled</code> é€‰é¡¹å¿…é¡»ä¸ºå¸ƒå°”å€¼ (<code>true</code>/<code>false</code>)<a class="hash-link" href="#å¦‚æœè®¾ç½®ï¼Œåˆ™-queryoptionsenabled-é€‰é¡¹å¿…é¡»ä¸ºå¸ƒå°”å€¼-truefalse" title="Direct link to heading">#</a></h3><p>ç°åœ¨ï¼Œ<code>enabled</code> çš„æŸ¥è¯¢é€‰é¡¹å°†ä»…åœ¨å€¼ä¸º <code>false</code> æ—¶ç¦ç”¨ã€‚
å¦‚æœéœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ <code>!!userId</code> æˆ– <code>Boolean(userId)</code> å¼ºåˆ¶è½¬æ¢å€¼ï¼Œå¦‚æœä¼ é€’äº†éå¸ƒå°”å€¼ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªæ˜æ˜¾çš„è¯­æ³•çš„é”™è¯¯ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="queryoptionsinitialstale-é€‰é¡¹å·²è¢«ç§»é™¤"></a><code>QueryOptions.initialStale</code> é€‰é¡¹å·²è¢«ç§»é™¤<a class="hash-link" href="#queryoptionsinitialstale-é€‰é¡¹å·²è¢«ç§»é™¤" title="Direct link to heading">#</a></h3><p><code>initialStale</code> é€‰é¡¹å·²è¢«ç§»é™¤ï¼Œåˆå§‹çš„æ•°æ®ç°åœ¨è¢«è§†ä¸ºå¸¸è§„æ•°æ®ã€‚
è¿™æ„å‘³ç€ï¼Œå¦‚æœæä¾› <code>initialData</code>ï¼Œåˆ™é»˜è®¤æŸ¥è¯¢å°†åœ¨æŒ‚è½½æ—¶é‡æ–°è·å–ã€‚
å¦‚æœæ‚¨ä¸æƒ³è¯¥åŠ¨ä½œè¢«ç«‹å³æ‰§è¡Œï¼Œåˆ™å¯ä»¥å®šä¹‰ä¸€ä¸ª <code>staleTime</code>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="queryoptionsforcefetchonmount-é€‰é¡¹è¢«-refetchonmount-always-æ›¿ä»£"></a><code>QueryOptions.forceFetchOnMount</code> é€‰é¡¹è¢« <code>refetchOnMount: &#x27;always&#x27;</code> æ›¿ä»£<a class="hash-link" href="#queryoptionsforcefetchonmount-é€‰é¡¹è¢«-refetchonmount-always-æ›¿ä»£" title="Direct link to heading">#</a></h3><p>è¯´å®è¯ï¼Œæˆ‘ä»¬å¢åŠ äº†å¤ªå¤šçš„ <code>refetchOn____</code> é€‰é¡¹ï¼Œæ‰€ä»¥è¿™åº”è¯¥èƒ½è§£å†³é—®é¢˜ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="queryoptionsrefetchonmount-é€‰é¡¹ç°åœ¨ä»…é€‚ç”¨äºå…¶çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æŸ¥è¯¢è§‚å¯Ÿè€…"></a><code>QueryOptions.refetchOnMount</code> é€‰é¡¹ç°åœ¨ä»…é€‚ç”¨äºå…¶çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æŸ¥è¯¢è§‚å¯Ÿè€…<a class="hash-link" href="#queryoptionsrefetchonmount-é€‰é¡¹ç°åœ¨ä»…é€‚ç”¨äºå…¶çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æŸ¥è¯¢è§‚å¯Ÿè€…" title="Direct link to heading">#</a></h3><p>å½“ <code>refetchOnMount</code> è®¾ç½®ä¸º <code>false</code> æ—¶ï¼Œä»»ä½•å…¶ä»–ç»„ä»¶éƒ½ä¸èƒ½åœ¨æŒ‚è½½æ—¶é‡æ–°è·å–æ•°æ®ã€‚
åœ¨ v3 ä¸­ï¼Œåªæœ‰è®¾ç½®äº†è¯¥é€‰é¡¹çš„ç»„ä»¶ä¸ä¼šåœ¨æŒ‚è½½æ—¶é‡æ–°è·å–ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="queryoptionsqueryfnparamsfilter-å·²è¢«åˆ é™¤ï¼Œä»¥æ”¯æŒæ–°çš„-queryfunctioncontext-å¯¹è±¡"></a><code>QueryOptions.queryFnParamsFilter</code> å·²è¢«åˆ é™¤ï¼Œä»¥æ”¯æŒæ–°çš„ <code>QueryFunctionContext</code> å¯¹è±¡<a class="hash-link" href="#queryoptionsqueryfnparamsfilter-å·²è¢«åˆ é™¤ï¼Œä»¥æ”¯æŒæ–°çš„-queryfunctioncontext-å¯¹è±¡" title="Direct link to heading">#</a></h3><p><code>queryFnParamsFilter</code> é€‰é¡¹å·²åˆ é™¤ï¼Œå› ä¸ºæŸ¥è¯¢å‡½æ•°ç°åœ¨é€šè¿‡è·å– <code>QueryFunctionContext</code> å¯¹è±¡è€Œä¸æ˜¯é€šè¿‡æŸ¥è¯¢é”®å€¼ã€‚</p><p>ç”±äº <code>QueryFunctionContext</code> è¿˜åŒ…å«æŸ¥è¯¢é”®å€¼ï¼Œå› æ­¤ä»å¯ä»¥åœ¨æŸ¥è¯¢å‡½æ•°æœ¬èº«ä¸­è¿‡æ»¤å‚æ•°ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="queryoptionsnotifyonstatuschange-é€‰é¡¹å·²è¢«-notifyonchangeprops-å’Œ-notifyonchangepropsexclusions-é€‰é¡¹æ›¿ä»£"></a><code>QueryOptions.notifyOnStatusChange</code> é€‰é¡¹å·²è¢« <code>notifyOnChangeProps</code> å’Œ <code>notifyOnChangePropsExclusions</code> é€‰é¡¹æ›¿ä»£<a class="hash-link" href="#queryoptionsnotifyonstatuschange-é€‰é¡¹å·²è¢«-notifyonchangeprops-å’Œ-notifyonchangepropsexclusions-é€‰é¡¹æ›¿ä»£" title="Direct link to heading">#</a></h3><p>æœ‰äº†è¿™äº›æ–°é€‰é¡¹ï¼Œå¯ä»¥åœ¨æ›´ç»†è…»çš„ç¨‹åº¦ä¸Šæ¥é…ç½®ç»„ä»¶é‡æ–°æ¸²æŸ“çš„é€»è¾‘ã€‚</p><p>åªæœ‰å½“ <code>data</code> æˆ– <code>error</code> è¢«æ”¹å˜æ—¶é‡æ–°æ¸²æŸ“ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useQuery </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">User</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;user&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    notifyOnChangeProps</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;error&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token maybe-class-name">Username</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åœ¨ <code>isStale</code> æ”¹å˜æ—¶å¿½ç•¥ï¼Œä¸è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useQuery </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">User</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;user&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    notifyOnChangePropsExclusions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;isStale&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token maybe-class-name">Username</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="queryresultclear-æ–¹æ³•é‡å‘½åä¸º-queryresultremove"></a><code>QueryResult.clear()</code> æ–¹æ³•é‡å‘½åä¸º <code>QueryResult.remove()</code><a class="hash-link" href="#queryresultclear-æ–¹æ³•é‡å‘½åä¸º-queryresultremove" title="Direct link to heading">#</a></h3><p>å°½ç®¡å®ƒè¢«ç§°ä¸º&quot;clear&quot;ï¼Œä½†å®é™…ä¸Šåªæ˜¯ä»é«˜é€Ÿç¼“å­˜ä¸­åˆ é™¤äº†å•ä¸ªæŸ¥è¯¢ã€‚
ç°åœ¨ï¼Œè¯¥åç§°ä¸å…¶åŠŸèƒ½åŒ¹é…ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="queryresultupdatedat-æ‹†åˆ†ä¸º-queryresultdataupdatedat-å’Œ-queryresulterrorupdatedat-å±æ€§"></a><code>QueryResult.updatedAt</code> æ‹†åˆ†ä¸º <code>QueryResult.dataUpdatedAt</code> å’Œ <code>QueryResult.errorUpdatedAt</code> å±æ€§<a class="hash-link" href="#queryresultupdatedat-æ‹†åˆ†ä¸º-queryresultdataupdatedat-å’Œ-queryresulterrorupdatedat-å±æ€§" title="Direct link to heading">#</a></h3><p>ç”±äºå¯ä»¥åŒæ—¶æ˜¾ç¤ºæ•°æ®å’Œé”™è¯¯ï¼Œå› æ­¤ <code>updatedAt</code> å±æ€§å·²æ‹†åˆ†ä¸º <code>dataUpdatedAt</code> å’Œ <code>errorUpdatedAt</code>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setconsole-è¢«æ–°å‡½æ•°-setlogger-æ›¿ä»£"></a><code>setConsole()</code> è¢«æ–°å‡½æ•° <code>setLogger()</code> æ›¿ä»£<a class="hash-link" href="#setconsole-è¢«æ–°å‡½æ•°-setlogger-æ›¿ä»£" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> setLogger </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ä½¿ç”¨ Sentry</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">setLogger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">error</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token maybe-class-name">Sentry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">captureException</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ä½¿ç”¨ Winston</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">setLogger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">winston</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">createLogger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-native-ä¸å†éœ€è¦é‡å†™-logger"></a>React Native ä¸å†éœ€è¦é‡å†™ Logger<a class="hash-link" href="#react-native-ä¸å†éœ€è¦é‡å†™-logger" title="Direct link to heading">#</a></h3><p>ä¸ºäº†é˜²æ­¢æŸ¥è¯¢å¤±è´¥æ—¶åœ¨ React Native ä¸­æ˜¾ç¤ºé”™è¯¯çš„ç•Œé¢ï¼Œå¿…é¡»æ‰‹åŠ¨æ›´æ”¹æ§åˆ¶å°ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> setConsole </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">setConsole</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  log</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  warn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">warn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  error</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">warn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åœ¨ v3 ä¸­ï¼Œ<strong>React Query åœ¨ React Native ä¸­ä½¿ç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨åšåˆ°ä¸Šé¢è¿™ç‚¹</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="typescript-çš„ç±»å‹"></a>Typescript çš„ç±»å‹<a class="hash-link" href="#typescript-çš„ç±»å‹" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="querystatus-çš„ç±»å‹å·²ç»ä»-enum-åˆ‡æ¢ä¸º-union-type"></a><code>QueryStatus</code> çš„ç±»å‹å·²ç»ä» <a href="https://www.typescriptlang.org/docs/handbook/enums.html#string-enums" target="_blank" rel="noopener noreferrer">enum</a> åˆ‡æ¢ä¸º <a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types" target="_blank" rel="noopener noreferrer">union type</a><a class="hash-link" href="#querystatus-çš„ç±»å‹å·²ç»ä»-enum-åˆ‡æ¢ä¸º-union-type" title="Direct link to heading">#</a></h4><p>å› æ­¤ï¼Œå¦‚æœæ‚¨è¦æ ¹æ®<code>QueryStatus</code>æšä¸¾å±æ€§æ£€æŸ¥æŸ¥è¯¢æˆ–ä¿®æ”¹çš„çŠ¶æ€ï¼Œä½ ç°åœ¨å¿…é¡»æ£€æŸ¥å…¶å­—ç¬¦ä¸²å­—é¢é‡ï¼Œè€Œä¸æ˜¯ä»¥å‰çš„æšä¸¾å€¼ã€‚</p><p>å› æ­¤ï¼Œæ‚¨å¿…é¡»å°†æšä¸¾å±æ€§æ›´æ”¹ä¸ºå…¶ç­‰æ•ˆçš„å­—ç¬¦ä¸²æ–‡å­—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li><code>QueryStatus.Idle</code> -&gt; <code>&#x27;idle&#x27;</code></li><li><code>QueryStatus.Loading</code> -&gt; <code>&#x27;loading&#x27;</code></li><li><code>QueryStatus.Error</code> -&gt; <code>&#x27;error&#x27;</code></li><li><code>QueryStatus.Success</code> -&gt; <code>&#x27;success&#x27;</code></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly diff"><div tabindex="0" class="prism-code language-diff codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> import { useQuery, QueryStatus } from &#x27;react-query&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> import { useQuery } from &#x27;react-query&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const { data, status } = useQuery([&#x27;post&#x27;, id], () =&gt; fetchPost(id));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> if (status === QueryStatus.Loading) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> if (status === &#x27;loading&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> if (status === QueryStatus.Error) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> if (status === &#x27;error&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ–°ç‰¹æ€§"></a>æ–°ç‰¹æ€§<a class="hash-link" href="#æ–°ç‰¹æ€§" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨"></a>æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨<a class="hash-link" href="#æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨" title="Direct link to heading">#</a></h3><p>ç°åœ¨ï¼Œ<code>useQuery</code> å’Œ <code>useInfiniteQuery</code> Hook åˆ†åˆ«å¸¦æœ‰ä¸€ä¸ª <code>select</code> é€‰é¡¹ï¼Œç”¨äºé€‰æ‹©æˆ–è½¬æ¢éƒ¨åˆ†æŸ¥è¯¢ç»“æœã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useQuery </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">User</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;user&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">select</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token maybe-class-name">Username</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å°† <code>notifyOnChangeProps</code> é€‰é¡¹è®¾ç½®ä¸º <code>[&#x27;data&#x27;ï¼Œ&#x27;error&#x27;]</code> ï¼Œä½¿å¾—ä»…åœ¨æ‰€é€‰æ•°æ®æ›´æ”¹æ—¶é‡æ–°æ¸²æŸ“ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="usequeries-hookï¼Œç”¨äºå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢"></a><code>useQueries()</code> hookï¼Œç”¨äºå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢<a class="hash-link" href="#usequeries-hookï¼Œç”¨äºå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢" title="Direct link to heading">#</a></h3><p>æƒ³åœ¨å¾ªç¯å†…è¿è¡Œ <code>useQuery</code> å—ï¼Ÿ
Hook è§„åˆ™è¯´ä¸ï¼Œä½†æ˜¯æœ‰äº†æ–°çš„ <code>useQueries()</code> hookï¼Œå¯ä»¥äº†ï¼</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useQueries </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Overview</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> results </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQueries</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPost </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPost </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ul</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> data </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> data </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">li key</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">li</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">ul</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä¿®æ”¹å¯¹é‡è¯•ç¦»çº¿çš„æ”¯æŒ"></a>ä¿®æ”¹å¯¹é‡è¯•/ç¦»çº¿çš„æ”¯æŒ<a class="hash-link" href="#ä¿®æ”¹å¯¹é‡è¯•ç¦»çº¿çš„æ”¯æŒ" title="Direct link to heading">#</a></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒReact Query ä¸ä¼šè‡ªåŠ¨é‡è¯•é”™è¯¯çš„ä¿®æ”¹ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ <code>retry</code> é€‰é¡¹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> mutation </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">addTodo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  retry</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>å¦‚æœç”±äºè®¾å¤‡ç¦»çº¿è€Œå¯¼è‡´ä¿®æ”¹å¤±è´¥ï¼Œé‚£ä¹ˆå½“è®¾å¤‡é‡æ–°è¿æ¥æ—¶ï¼Œå®ƒä»¬å°†ä»¥ç›¸åŒçš„é¡ºåºé‡æ–°å°è¯•ã€‚</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æŒä¹…åŒ–ä¿®æ”¹"></a>æŒä¹…åŒ–ä¿®æ”¹<a class="hash-link" href="#æŒä¹…åŒ–ä¿®æ”¹" title="Direct link to heading">#</a></h3><p>ç°åœ¨å¯ä»¥å°†ä¿®æ”¹æŒä¹…åŒ–åˆ°æ•°æ®åº“æˆ–å…¶ä»–ä»€ä¹ˆå­˜å‚¨æ–¹å¼ä¸­ï¼Œå¹¶åœ¨ä»¥åæ¢å¤ã€‚æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨<a href="/react-query-web-i18n/guides&amp;concepts/mutations">ä¿®æ”¹</a>ä¸­æ‰¾åˆ°ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="observer"></a>Observer<a class="hash-link" href="#observer" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="queryobserver"></a>QueryObserver<a class="hash-link" href="#queryobserver" title="Direct link to heading">#</a></h4><p>QueryObserver å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œ/æˆ–ç›‘è§†ä¸€ä¸ªæŸ¥è¯¢ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> observer </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">QueryObserver</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> unsubscribe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> observer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="infinitequeryobserver"></a>InfiniteQueryObserver<a class="hash-link" href="#infinitequeryobserver" title="Direct link to heading">#</a></h4><p>InfiniteQueryObserver å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œ/æˆ–ç›‘è§†ä¸€ä¸ªæ— é™æŸ¥è¯¢ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> observer </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">InfiniteQueryObserver</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getNextPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">lastPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> allPages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> lastPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">nextCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getPreviousPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">firstPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> allPages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> firstPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prevCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> unsubscribe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> observer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="queriesobserver"></a>QueriesObserver<a class="hash-link" href="#queriesobserver" title="Direct link to heading">#</a></h4><p>QueriesObserver å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œ/æˆ–ç›‘è§†å¤šä¸ªæŸ¥è¯¢ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> observer </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">QueriesObserver</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPost </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPost </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> unsubscribe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> observer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä¸ºç‰¹å®šæŸ¥è¯¢ä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹"></a>ä¸ºç‰¹å®šæŸ¥è¯¢/ä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹<a class="hash-link" href="#ä¸ºç‰¹å®šæŸ¥è¯¢ä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æŸ¥è¯¢"></a>æŸ¥è¯¢<a class="hash-link" href="#æŸ¥è¯¢" title="Direct link to heading">#</a></h4><p><code>QueryClient.setQueryDefaults()</code> æ–¹æ³•å¯ç”¨äºä¸ºç‰¹å®šæŸ¥è¯¢è®¾ç½®é»˜è®¤é€‰é¡¹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">setQueryDefaults</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPosts </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Component</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä¿®æ”¹"></a>ä¿®æ”¹<a class="hash-link" href="#ä¿®æ”¹" title="Direct link to heading">#</a></h4><p><code>QueryClient.setMutationDefaults()</code> æ–¹æ³•å¯ç”¨äºä¸ºç‰¹å®šä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">setMutationDefaults</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;addPost&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> mutationFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> addPost </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Component</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;addPost&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="useisfetching"></a>useIsFetching()<a class="hash-link" href="#useisfetching" title="Direct link to heading">#</a></h3><p>ç°åœ¨ï¼Œ<code>useIsFetching()</code> Hook å¯ä»¥æ¥æ”¶ä¸€äº›è¿‡æ»¤å™¨ï¼Œè¿™äº›è¿‡æ»¤å™¨å¯ç”¨äºä¾‹å¦‚ä»…æ˜¾ç¤ºæŸäº›æŸ¥è¯¢ç±»å‹çš„å¾®è°ƒï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> fetches </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useIsFetching</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="åˆ†ç¦»"></a>åˆ†ç¦»<a class="hash-link" href="#åˆ†ç¦»" title="Direct link to heading">#</a></h2><p>ç°åœ¨ï¼ŒReact Query çš„æ ¸å¿ƒä¸ React å®Œå…¨åˆ†ç¦»ï¼Œè¿™æ„å‘³ç€å®ƒä¹Ÿå¯ä»¥<strong>ç‹¬ç«‹ä½¿ç”¨æˆ–åœ¨å…¶ä»–æ¡†æ¶ä¸­ä½¿ç”¨</strong>ã€‚
ä½¿ç”¨ <code>react-query/core</code> å…¥å£ç‚¹ä»…å¯¼å…¥æ ¸å¿ƒåŠŸèƒ½ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">QueryClient</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query/core&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="devtools-ç°åœ¨æ˜¯ä¸»ä»“åº“å’Œ-npm-è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†"></a>Devtools ç°åœ¨æ˜¯ä¸»ä»“åº“å’Œ npm è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†<a class="hash-link" href="#devtools-ç°åœ¨æ˜¯ä¸»ä»“åº“å’Œ-npm-è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†" title="Direct link to heading">#</a></h2><p>devtoolsç°åœ¨åŒ…å«åœ¨ <code>react-query</code> ä¸‹çš„ <code>react-query/devtools</code> ä¸­ã€‚
åªéœ€å°† <code>react-query-devtools</code> å¯¼å…¥æ›¿æ¢ä¸º <code>react-query/devtools</code> å³å¯</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/cangSDARM/react-query-web-i18n/docs/guides&amp;concepts/migrating-to-react-query-3.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-07-19T09:07:28.000Z" class="lastUpdatedDate_1WI_">7/19/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/react-query-web-i18n/guides&amp;concepts/does-this-replace-client-state"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« React Queryæ˜¯å¦ä¼š/å¯ä»¥å–ä»£Reduxï¼ŒMobXæˆ–å…¶ä»–å…¨å±€çŠ¶æ€ç®¡ç†å™¨ï¼Ÿ</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/react-query-web-i18n/plugins/broadcast-query-client"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">broadcastQueryClient (Experimental) Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#æ¦‚è§ˆ" class="table-of-contents__link">æ¦‚è§ˆ</a></li><li><a href="#ç ´åæ€§ä¿®æ”¹" class="table-of-contents__link">ç ´åæ€§ä¿®æ”¹</a><ul><li><a href="#querycache-å·²è¢«åˆ†è§£è¿›-queryclient-å’Œè¾ƒä½çº§åˆ«çš„-querycache-å’Œ-mutationcache-å®ä¾‹ã€‚" class="table-of-contents__link">QueryCache å·²è¢«åˆ†è§£è¿› <code>QueryClient</code> å’Œè¾ƒä½çº§åˆ«çš„ <code>QueryCache</code> å’Œ <code>MutationCache</code> å®ä¾‹ã€‚</a></li><li><a href="#reactqueryconfigprovider-å’Œ-reactquerycacheprovider-å·²è¢«-queryclientprovider-æ›¿ä»£" class="table-of-contents__link"><code>ReactQueryConfigProvider</code> å’Œ <code>ReactQueryCacheProvider</code> å·²è¢« <code>QueryClientProvider</code> æ›¿ä»£</a></li><li><a href="#é»˜è®¤çš„-querycache-å·²è¢«ç§»é™¤ï¼Œå½»åº•" class="table-of-contents__link">é»˜è®¤çš„ <code>QueryCache</code> å·²è¢«ç§»é™¤ï¼Œå½»åº•</a></li><li><a href="#ä¸æ¨èä½¿ç”¨çš„-makequerycache-å·²è¢«åˆ é™¤" class="table-of-contents__link">ä¸æ¨èä½¿ç”¨çš„ <code>makeQueryCache</code> å·²è¢«åˆ é™¤</a></li><li><a href="#querycacheprefetchquery-è¢«-queryclientprefetchquery-æ›¿ä»£" class="table-of-contents__link"><code>QueryCache.prefetchQuery()</code> è¢« <code>QueryClient.prefetchQuery()</code> æ›¿ä»£</a></li><li><a href="#reactqueryerrorresetboundary-å’Œ-querycachereseterrorboundaries-è¢«-queryerrorresetboundary-å’Œ-usequeryerrorresetboundary-æ›¿ä»£" class="table-of-contents__link"><code>ReactQueryErrorResetBoundary</code> å’Œ <code>QueryCache.resetErrorBoundaries()</code> è¢« <code>QueryErrorResetBoundary</code> å’Œ <code>useQueryErrorResetBoundary()</code> æ›¿ä»£</a></li><li><a href="#querycachegetquery-è¢«-querycachefind-æ›¿ä»£" class="table-of-contents__link"><code>QueryCache.getQuery()</code> è¢« <code>QueryCache.find()</code> æ›¿ä»£</a></li><li><a href="#querycachegetqueries-åˆå¹¶è¿›-querycachefindall" class="table-of-contents__link"><code>QueryCache.getQueries()</code> åˆå¹¶è¿› <code>QueryCache.findAll()</code></a></li><li><a href="#querycacheisfetching-åˆå¹¶è¿›-queryclientisfetching" class="table-of-contents__link"><code>QueryCache.isFetching</code> åˆå¹¶è¿› <code>QueryClient.isFetching()</code></a></li><li><a href="#usequerycache-hook-è¢«-usequeryclient-hook-æ›¿ä»£" class="table-of-contents__link"><code>useQueryCache</code> hook è¢« <code>useQueryClient</code> hook æ›¿ä»£</a></li><li><a href="#æŸ¥è¯¢çš„é”®å€¼éƒ¨åˆ†ä¸å†ä½œä¸ºå‚æ•°è‡ªåŠ¨ä¼ é€’åˆ°æŸ¥è¯¢å‡½æ•°" class="table-of-contents__link">æŸ¥è¯¢çš„é”®å€¼éƒ¨åˆ†ä¸å†ä½œä¸ºå‚æ•°è‡ªåŠ¨ä¼ é€’åˆ°æŸ¥è¯¢å‡½æ•°</a></li><li><a href="#æ— é™æŸ¥è¯¢çš„åˆ†é¡µå‚æ•°ç°åœ¨ä½¿ç”¨-queryfunctioncontextpageparam-ä¼ é€’" class="table-of-contents__link">æ— é™æŸ¥è¯¢çš„åˆ†é¡µå‚æ•°ç°åœ¨ä½¿ç”¨ <code>QueryFunctionContext.pageParam</code> ä¼ é€’</a></li><li><a href="#ä¸æ¨èä½¿ç”¨-usepaginatedqueryï¼Œè€Œæ˜¯åº”è¯¥é€‰æ‹©-keeppreviousdata-å‚æ•°" class="table-of-contents__link">ä¸æ¨èä½¿ç”¨ <code>usePaginatedQuery()</code>ï¼Œè€Œæ˜¯åº”è¯¥é€‰æ‹© <code>keepPreviousData</code> å‚æ•°</a></li><li><a href="#useinfinitequery-ç°åœ¨æ˜¯åŒå‘çš„" class="table-of-contents__link"><code>useInfiniteQuery()</code> ç°åœ¨æ˜¯åŒå‘çš„</a></li><li><a href="#ç°åœ¨ï¼Œæ— é™æŸ¥è¯¢æ•°æ®åŒ…å«é¡µé¢æ•°ç»„å’Œç”¨äºè·å–è¿™äº›é¡µé¢çš„-pageparams" class="table-of-contents__link">ç°åœ¨ï¼Œæ— é™æŸ¥è¯¢æ•°æ®åŒ…å«é¡µé¢æ•°ç»„å’Œç”¨äºè·å–è¿™äº›é¡µé¢çš„ pageParams</a></li><li><a href="#usemutation-ç°åœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„" class="table-of-contents__link"><code>useMutation</code> ç°åœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„</a></li><li><a href="#mutationmutate-ä¸å†è¿”å›ä¸€ä¸ª-promise" class="table-of-contents__link"><code>mutation.mutate</code> ä¸å†è¿”å›ä¸€ä¸ª Promise</a></li><li><a href="#usequery-é…ç½®æ–¹å¼æ”¹å˜" class="table-of-contents__link"><code>useQuery</code> é…ç½®æ–¹å¼æ”¹å˜</a></li><li><a href="#å¦‚æœè®¾ç½®ï¼Œåˆ™-queryoptionsenabled-é€‰é¡¹å¿…é¡»ä¸ºå¸ƒå°”å€¼-truefalse" class="table-of-contents__link">å¦‚æœè®¾ç½®ï¼Œåˆ™ <code>QueryOptions.enabled</code> é€‰é¡¹å¿…é¡»ä¸ºå¸ƒå°”å€¼ (<code>true</code>/<code>false</code>)</a></li><li><a href="#queryoptionsinitialstale-é€‰é¡¹å·²è¢«ç§»é™¤" class="table-of-contents__link"><code>QueryOptions.initialStale</code> é€‰é¡¹å·²è¢«ç§»é™¤</a></li><li><a href="#queryoptionsforcefetchonmount-é€‰é¡¹è¢«-refetchonmount-always-æ›¿ä»£" class="table-of-contents__link"><code>QueryOptions.forceFetchOnMount</code> é€‰é¡¹è¢« <code>refetchOnMount: &#39;always&#39;</code> æ›¿ä»£</a></li><li><a href="#queryoptionsrefetchonmount-é€‰é¡¹ç°åœ¨ä»…é€‚ç”¨äºå…¶çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æŸ¥è¯¢è§‚å¯Ÿè€…" class="table-of-contents__link"><code>QueryOptions.refetchOnMount</code> é€‰é¡¹ç°åœ¨ä»…é€‚ç”¨äºå…¶çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æŸ¥è¯¢è§‚å¯Ÿè€…</a></li><li><a href="#queryoptionsqueryfnparamsfilter-å·²è¢«åˆ é™¤ï¼Œä»¥æ”¯æŒæ–°çš„-queryfunctioncontext-å¯¹è±¡" class="table-of-contents__link"><code>QueryOptions.queryFnParamsFilter</code> å·²è¢«åˆ é™¤ï¼Œä»¥æ”¯æŒæ–°çš„ <code>QueryFunctionContext</code> å¯¹è±¡</a></li><li><a href="#queryoptionsnotifyonstatuschange-é€‰é¡¹å·²è¢«-notifyonchangeprops-å’Œ-notifyonchangepropsexclusions-é€‰é¡¹æ›¿ä»£" class="table-of-contents__link"><code>QueryOptions.notifyOnStatusChange</code> é€‰é¡¹å·²è¢« <code>notifyOnChangeProps</code> å’Œ <code>notifyOnChangePropsExclusions</code> é€‰é¡¹æ›¿ä»£</a></li><li><a href="#queryresultclear-æ–¹æ³•é‡å‘½åä¸º-queryresultremove" class="table-of-contents__link"><code>QueryResult.clear()</code> æ–¹æ³•é‡å‘½åä¸º <code>QueryResult.remove()</code></a></li><li><a href="#queryresultupdatedat-æ‹†åˆ†ä¸º-queryresultdataupdatedat-å’Œ-queryresulterrorupdatedat-å±æ€§" class="table-of-contents__link"><code>QueryResult.updatedAt</code> æ‹†åˆ†ä¸º <code>QueryResult.dataUpdatedAt</code> å’Œ <code>QueryResult.errorUpdatedAt</code> å±æ€§</a></li><li><a href="#setconsole-è¢«æ–°å‡½æ•°-setlogger-æ›¿ä»£" class="table-of-contents__link"><code>setConsole()</code> è¢«æ–°å‡½æ•° <code>setLogger()</code> æ›¿ä»£</a></li><li><a href="#react-native-ä¸å†éœ€è¦é‡å†™-logger" class="table-of-contents__link">React Native ä¸å†éœ€è¦é‡å†™ Logger</a></li><li><a href="#typescript-çš„ç±»å‹" class="table-of-contents__link">Typescript çš„ç±»å‹</a></li></ul></li><li><a href="#æ–°ç‰¹æ€§" class="table-of-contents__link">æ–°ç‰¹æ€§</a><ul><li><a href="#æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨" class="table-of-contents__link">æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨</a></li><li><a href="#usequeries-hookï¼Œç”¨äºå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢" class="table-of-contents__link"><code>useQueries()</code> hookï¼Œç”¨äºå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢</a></li><li><a href="#ä¿®æ”¹å¯¹é‡è¯•ç¦»çº¿çš„æ”¯æŒ" class="table-of-contents__link">ä¿®æ”¹å¯¹é‡è¯•/ç¦»çº¿çš„æ”¯æŒ</a></li><li><a href="#æŒä¹…åŒ–ä¿®æ”¹" class="table-of-contents__link">æŒä¹…åŒ–ä¿®æ”¹</a></li><li><a href="#observer" class="table-of-contents__link">Observer</a></li><li><a href="#ä¸ºç‰¹å®šæŸ¥è¯¢ä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹" class="table-of-contents__link">ä¸ºç‰¹å®šæŸ¥è¯¢/ä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹</a></li><li><a href="#useisfetching" class="table-of-contents__link">useIsFetching()</a></li></ul></li><li><a href="#åˆ†ç¦»" class="table-of-contents__link">åˆ†ç¦»</a></li><li><a href="#devtools-ç°åœ¨æ˜¯ä¸»ä»“åº“å’Œ-npm-è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†" class="table-of-contents__link">Devtools ç°åœ¨æ˜¯ä¸»ä»“åº“å’Œ npm è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Web Community.</div></div></div></footer></div>
<script src="/react-query-web-i18n/assets/js/runtime~main.5a34c61e.js"></script>
<script src="/react-query-web-i18n/assets/js/main.614dafff.js"></script>
</body>
</html>