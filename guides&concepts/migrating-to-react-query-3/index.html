<!doctype html>
<html class="docs-version-v3" lang="cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=0.86,maximum-scale=3,minimum-scale=0.86">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<meta content="React Query,TanStack Query,React,Query,TanStack Queryä¸­æ–‡,React Queryä¸­æ–‡,æ•°æ®åŒæ­¥" name="Keywords">
<title data-rh="true">è¿ç§»åˆ°React Query 3 | React Query ä¸­æ–‡æ–‡æ¡£</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://cangsdarm.github.io/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3"><meta data-rh="true" name="docusaurus_locale" content="cn"><meta data-rh="true" name="docusaurus_version" content="v3"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v3"><meta data-rh="true" name="docsearch:language" content="cn"><meta data-rh="true" name="docsearch:version" content="v3"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v3"><meta data-rh="true" property="og:title" content="è¿ç§»åˆ°React Query 3 | React Query ä¸­æ–‡æ–‡æ¡£"><meta data-rh="true" name="description" content="ä»¥å‰ç‰ˆæœ¬çš„ React Query å¾ˆæ£’ï¼Œå¹¶ä¸ºåº“å¸¦æ¥äº†ä¸€äº›æƒŠäººçš„æ–°ç‰¹æ€§ã€æ›´å¤šçš„é­”åŠ›ä»¥åŠæ›´å¥½çš„æ•´ä½“ä½“éªŒã€‚"><meta data-rh="true" property="og:description" content="ä»¥å‰ç‰ˆæœ¬çš„ React Query å¾ˆæ£’ï¼Œå¹¶ä¸ºåº“å¸¦æ¥äº†ä¸€äº›æƒŠäººçš„æ–°ç‰¹æ€§ã€æ›´å¤šçš„é­”åŠ›ä»¥åŠæ›´å¥½çš„æ•´ä½“ä½“éªŒã€‚"><link data-rh="true" rel="icon" href="/react-query-web-i18n/img/favicon.png"><link data-rh="true" rel="canonical" href="https://cangsdarm.github.io/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3"><link data-rh="true" rel="alternate" href="https://cangsdarm.github.io/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3" hreflang="cn"><link data-rh="true" rel="alternate" href="https://cangsdarm.github.io/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3" hreflang="x-default"><link rel="stylesheet" href="/react-query-web-i18n/assets/css/styles.a3811fef.css">
<link rel="preload" href="/react-query-web-i18n/assets/js/runtime~main.f245a536.js" as="script">
<link rel="preload" href="/react-query-web-i18n/assets/js/main.53ec0a45.js" as="script">
<meta name="google-site-verification" content="Qa9IAETG_rUMzy5ZXHjOxjAK7awElBSO6p_XVLGzuZk">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EGJ5SQ3RN3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EGJ5SQ3RN3")</script>
</head>
<body class="navigation-with-keyboard" itemscope="" itemtype="http://schema.org/Organization">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#f1563a;color:#000000" role="banner"><div class="announcementBarContent_KsVm">v4çš„æ–‡æ¡£ç¿»è¯‘ä¸­(<span style="font-weight:bold;">"å‡†å¤‡å¼€å§‹"åŠ"é€‚é…å™¨"å·²ç»ç¿»è¯‘å®Œæ¯•!</span>å…¶ä»–è¯·æŸ¥çœ‹<a href="/react-query-web-i18n/next/tags/ç¿»è¯‘å®Œæˆ">"ç¿»è¯‘å®Œæˆ"</a>çš„tag!)ï¼Œç°åœ¨ç¨³å®šçš„æ˜¯v3ç‰ˆæœ¬çš„æ–‡æ¡£</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/react-query-web-i18n/"><div class="navbar__logo"><img src="/react-query-web-i18n/img/logo-v4.png" alt="logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/react-query-web-i18n/img/logo-v4.png" alt="logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">TanStack Query ä¸­æ–‡æ–‡æ¡£</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/react-query-web-i18n/">æ–‡æ¡£</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/react-query-web-i18n/">v3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/react-query-web-i18n/next/guides&amp;concepts/migrating-to-react-query-3">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3">v3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link">å®˜æ–¹èµ„æºï¼ˆè‹±æ–‡ï¼‰</a><ul class="dropdown__menu"><li><a href="https://tanstack.com/query/v4/docs/examples/react/basic" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>ç¤ºä¾‹<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://learn.tanstack.com/p/react-query-essentials" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>å­¦ä¹ <svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/TanStack/query" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Github<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><a href="https://github.com/cangSDARM/react-query-web-i18n" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO menuWithAnnouncementBar_x19h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">å‡†å¤‡å¼€å§‹</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/">æ¦‚è§ˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/installation">å®‰è£…</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/quick-start">å¿«é€Ÿå…¥é—¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/devtools">å¼€å‘è°ƒè¯•å·¥å…·</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/videos">è§†é¢‘æ•™ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/comparison">æ¯”è¾ƒ | React Query vs SWR vs Apollo vs RTK Query vs React Router</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/typescript">TypeScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/graphql">GraphQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/getstarted/react-native">React Native</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">æŒ‡å—&amp;æ¦‚å¿µ</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/important-defaults">é‡è¦çš„é»˜è®¤é…ç½® important-defaults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/queries">æŸ¥è¯¢ queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/query-keys">æŸ¥è¯¢çš„é”®å€¼ query-keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/query-functions">æŸ¥è¯¢å‡½æ•° query-functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/parallel-queries">å¹¶è¡ŒæŸ¥è¯¢ parallel-queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/dependent-queries">æœ‰ä¾èµ–çš„æŸ¥è¯¢ dependent-queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/background-fetching-indicators">åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨ background-fetching-indicators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/window-focus-refetching">çª—å£ç„¦ç‚¹å½±å“çš„æ•°æ®åˆ·æ–° window-focus-refetching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/disabling-queries">ç¦ç”¨/æš‚åœæŸ¥è¯¢ disabling-queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/query-retries">æŸ¥è¯¢é‡è¯• query-retries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/paginated-queries">åˆ†é¡µ/æ»åæŸ¥è¯¢ paginated-queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/infinite-queries">æ— é™æŸ¥è¯¢ infinite-queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/placeholder-query-data">æŸ¥è¯¢æ•°æ®å ä½ç¬¦ placeholder-query-data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/initial-query-data">åˆå§‹åŒ–çš„æŸ¥è¯¢æ•°æ® initial-query-data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/prefetching">é¢„å–æ•°æ® prefetching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/mutations">ä¿®æ”¹ mutations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/query-invalidation">æŸ¥è¯¢å¤±æ•ˆ query-invalidation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/invalidation-from-mutations">ä¿®æ”¹å¯¼è‡´çš„å¤±æ•ˆ invalidation-from-mutations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/updates-from-mutation-responses">å“åº”æ›´æ–°çš„æ•°æ® updates-from-mutation-responses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/optimistic-updates">ä¹è§‚æ›´æ–° optimistic-updates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/query-cancellation">æŸ¥è¯¢å–æ¶ˆ query-cancellation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/scroll-restoration">æ»šåŠ¨æ¢å¤ scroll-restoration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/filters">è¿‡æ»¤å™¨ filters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/ssr">æœåŠ¡ç«¯æ¸²æŸ“ SSR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/caching">ç¼“å­˜ç¤ºä¾‹ caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/default-query-function">é»˜è®¤çš„æŸ¥è¯¢å‡½æ•° default-query-function</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/suspense">Suspense</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/testing">æµ‹è¯• testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/does-this-replace-client-state">React Queryæ˜¯å¦ä¼š/å¯ä»¥å–ä»£Reduxï¼ŒMobXæˆ–å…¶ä»–å…¨å±€çŠ¶æ€ç®¡ç†å™¨ï¼Ÿ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3">è¿ç§»åˆ°React Query 3</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">èŒƒä¾‹</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://react-query.tanstack.com/examples/simple" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>å®˜æ–¹ç¤ºä¾‹<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://search.bilibili.com/all?keyword=react-query" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>å›½å†…å†…å®¹(Bilibili)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">ç¤¾åŒºæ•™ç¨‹/åšå®¢</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://react-query.tanstack.com/community/tkdodos-blog" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>TkDodo&#x27;s Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://juejin.cn/post/6937833844837974053" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>å…¥é—¨æ•™ç¨‹(æ˜é‡‘)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">æ’ä»¶</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/plugins/broadcast-query-client">broadcastQueryClient (Experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/plugins/createAsyncStoragePersistor">createAsyncStoragePersistor (Experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/plugins/createWebStoragePersistor">createWebStoragePersistor (Experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/plugins/persist-query-client">persistQueryClient (Experimental)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">APIå‚è€ƒ</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://react-query.tanstack.com/reference/useQuery" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>ç­‰å¾…ç¿»è¯‘...<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/react-query-web-i18n/doc_template">å¯¹è´¡çŒ®è€…å†™çš„æ–‡æ¡£è§„èŒƒ</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/react-query-web-i18n/">ğŸ </a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">æŒ‡å—&amp;æ¦‚å¿µ</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/react-query-web-i18n/guides&amp;concepts/migrating-to-react-query-3">è¿ç§»åˆ°React Query 3</a></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v3</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>è¿ç§»åˆ°React Query 3</h1></header><p>ä»¥å‰ç‰ˆæœ¬çš„ React Query å¾ˆæ£’ï¼Œå¹¶ä¸ºåº“å¸¦æ¥äº†ä¸€äº›æƒŠäººçš„æ–°ç‰¹æ€§ã€æ›´å¤šçš„é­”åŠ›ä»¥åŠæ›´å¥½çš„æ•´ä½“ä½“éªŒã€‚
ç¤¾åŒºè¿˜ä¸º React Query å¸¦æ¥äº†è®¸å¤šå»ºè®®ï¼ŒåŒæ ·ä¹Ÿå¸¦æ¥äº†å¯¹ React Query çš„å¤§é‡æ”¹è¿›ï¼ˆissues/contributionsï¼‰ã€‚
v3 ç‰ˆæœ¬ merge äº†è®¸å¤šæ€§èƒ½ä¼˜åŒ–å’Œ API è°ƒä¼˜çš„å†…å®¹ã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="æ¦‚è§ˆ">æ¦‚è§ˆ<a class="hash-link" href="#æ¦‚è§ˆ" title="Direct link to heading">â€‹</a></h2><ul><li>æ›´å…·å¯æ‰©å±•æ€§å’Œå¯æµ‹è¯•æ€§çš„ç¼“å­˜é…ç½®</li><li>æ›´å¥½çš„ SSR æ”¯æŒ</li><li>å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹çš„æ•°æ®å»¶è¿Ÿ(Data-lagï¼Œä»¥å‰çš„ usePaginatedQuery)</li><li>åŒå‘(Bi-directional)æ— é™æŸ¥è¯¢</li><li>æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨ï¼</li><li>åœ¨ä½¿ç”¨å‰ä¸ºæŸ¥è¯¢å’Œ/æˆ–ä¿®æ”¹é…ç½®å®Œæ•´çš„é»˜è®¤å€¼</li><li>æ›´åŠ ç»†ç²’åº¦çš„å¯é€‰æ¸²æŸ“ä¼˜åŒ–</li><li>æ–°ç”¨é€” <code>useQueries</code> Hookï¼ï¼ˆå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢ï¼‰</li><li>æŸ¥è¯¢è¿‡æ»¤å™¨å¯¹ <code>useIsFetching()</code> Hook çš„æ”¯æŒï¼</li><li>ä¿®æ”¹å¯¹äºé‡è¯•/ç¦»çº¿/é‡æ”¾çš„æ”¯æŒ</li><li>ä¿®æ”¹/æŸ¥è¯¢å¯ä»¥åœ¨ React ä¹‹å¤–å®ç°è§‚å¯Ÿè€…æ¨¡å¼</li><li>éšæ—¶éšåœ°ä½¿ç”¨ React Query æ ¸å¿ƒé€»è¾‘ï¼</li><li>é€šè¿‡ä½¿ç”¨<code>react-query/devtools</code>ï¼Œéšæ—¶äº«å— Devtools</li><li>æŒä¹…åŒ–ç¼“å­˜åˆ° webçš„å­˜å‚¨ ä¸­ (<em>å®éªŒæ€§</em>ï¼Œ <code>react-query/persistQueryClient-experimental</code> å’Œ <code>react-query/createWebStoragePersistor-experimental</code>)</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="ç ´åæ€§ä¿®æ”¹">ç ´åæ€§ä¿®æ”¹<a class="hash-link" href="#ç ´åæ€§ä¿®æ”¹" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="querycache-å·²è¢«åˆ†è§£è¿›-queryclient-å’Œè¾ƒä½çº§åˆ«çš„-querycache-å’Œ-mutationcache-å®ä¾‹">QueryCache å·²è¢«åˆ†è§£è¿› <code>QueryClient</code> å’Œè¾ƒä½çº§åˆ«çš„ <code>QueryCache</code> å’Œ <code>MutationCache</code> å®ä¾‹ã€‚<a class="hash-link" href="#querycache-å·²è¢«åˆ†è§£è¿›-queryclient-å’Œè¾ƒä½çº§åˆ«çš„-querycache-å’Œ-mutationcache-å®ä¾‹" title="Direct link to heading">â€‹</a></h3><p><code>QueryCache</code> åŒ…å«æ‰€æœ‰æŸ¥è¯¢ï¼Œ<code>MutationCache</code> åŒ…å«æ‰€æœ‰ä¿®æ”¹ï¼Œè€Œ <code>QueryClient</code> å¯ç”¨äºè®¾ç½®é…ç½®å¹¶ä¸å…¶è¿›è¡Œäº¤äº’ã€‚</p><p>è¿™å¸¦æ¥äº†ä¸€äº›å¥½å¤„ï¼š</p><ul><li>å…è®¸ä½¿ç”¨ä¸åŒç±»å‹çš„ç¼“å­˜</li><li>å…·æœ‰ä¸åŒé…ç½®çš„å¤šä¸ª clinet å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç¼“å­˜</li><li>Clinets å¯ä»¥è·Ÿè¸ªæŸ¥è¯¢ï¼Œè¿™äº›æŸ¥è¯¢å¯ç”¨åœ¨ SSR ä¸Šå…±äº«ç¼“å­˜</li><li>å®¢æˆ·ç«¯ API æ›´ä¾§é‡äºä¸€èˆ¬ç”¨æ³•</li><li>æ›´å®¹æ˜“è¿›è¡Œç‹¬ç«‹äºå„ä¸ªç»„ä»¶çš„æµ‹è¯•</li></ul><p>å½“ <code>new QueryClient()</code> æ—¶ï¼Œå¦‚æœä¸æä¾› <code>QueryCache</code> å’Œ <code>MutationCache</code> å¯¹è±¡ï¼Œåˆ™ä¼šè‡ªåŠ¨ä¸ºæ‚¨åˆ›å»º</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">QueryClient</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> queryClient </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">QueryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="reactqueryconfigprovider-å’Œ-reactquerycacheprovider-å·²è¢«-queryclientprovider-æ›¿ä»£"><code>ReactQueryConfigProvider</code> å’Œ <code>ReactQueryCacheProvider</code> å·²è¢« <code>QueryClientProvider</code> æ›¿ä»£<a class="hash-link" href="#reactqueryconfigprovider-å’Œ-reactquerycacheprovider-å·²è¢«-queryclientprovider-æ›¿ä»£" title="Direct link to heading">â€‹</a></h3><p>ç°åœ¨å¯ä»¥åœ¨ <code>QueryClient</code> ä¸­æŒ‡å®šæŸ¥è¯¢å’Œä¿®æ”¹çš„é»˜è®¤å‚æ•°ï¼š</p><p><strong>æ³¨æ„ï¼Œç°åœ¨è¿™æ˜¯ä¸€ä¸ªé»˜è®¤é€‰é¡¹(defaultOptions)ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé»˜è®¤é…ç½®(defaultConfig)</strong></p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> queryClient </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">QueryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">defaultOptions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">queries</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// query options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">mutations</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// mutation options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><code>QueryClientProvider</code> ç»„ä»¶ç°åœ¨ç”¨äºå°† <code>QueryClient</code> è¿æ¥åˆ°åº”ç”¨ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">QueryClient</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">QueryClientProvider</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> queryClient </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">QueryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">App</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">QueryClientProvider</span><span class="token plain"> client</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token maybe-class-name">QueryClientProvider</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="é»˜è®¤çš„-querycache-å·²è¢«ç§»é™¤å½»åº•">é»˜è®¤çš„ <code>QueryCache</code> å·²è¢«ç§»é™¤ï¼Œå½»åº•<a class="hash-link" href="#é»˜è®¤çš„-querycache-å·²è¢«ç§»é™¤å½»åº•" title="Direct link to heading">â€‹</a></h3><p>å¦‚å…ˆå‰æ‰€æåˆ°çš„ï¼Œä¸å†æœ‰ä»ä¸»åŒ…åˆ›å»ºæˆ–å¯¼å‡ºçš„é»˜è®¤ <code>QueryCache</code>ã€‚
ä½ å¿…é¡»é€šè¿‡ <code>new QueryClient()</code> æˆ– <code>new QueryCache()</code> è‡ªå·±åˆ›å»ºä¸€ä¸ªï¼ˆåä¸€ä¸ªå¯ä»¥ç¨åé€šè¿‡ <code>new QueryClient({ queryCache })</code> ä¼ å…¥ï¼‰</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ä¸æ¨èä½¿ç”¨çš„-makequerycache-å·²è¢«åˆ é™¤">ä¸æ¨èä½¿ç”¨çš„ <code>makeQueryCache</code> å·²è¢«åˆ é™¤<a class="hash-link" href="#ä¸æ¨èä½¿ç”¨çš„-makequerycache-å·²è¢«åˆ é™¤" title="Direct link to heading">â€‹</a></h3><p>å·²ç»æœ‰å¾ˆé•¿æ—¶é—´äº†ï¼Œä½†æ˜¯ç»ˆäºæ¶ˆå¤±äº† :)</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="querycacheprefetchquery-è¢«-queryclientprefetchquery-æ›¿ä»£"><code>QueryCache.prefetchQuery()</code> è¢« <code>QueryClient.prefetchQuery()</code> æ›¿ä»£<a class="hash-link" href="#querycacheprefetchquery-è¢«-queryclientprefetchquery-æ›¿ä»£" title="Direct link to heading">â€‹</a></h3><p>æ–°çš„ <code>QueryClient.prefetchQuery()</code> å‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œä½†<strong>ä¸ä¼šä»æŸ¥è¯¢ä¸­è¿”å›æ•°æ®</strong>ã€‚å¦‚æœä½ éœ€è¦æ•°æ®ï¼Œä½¿ç”¨æ–°çš„ <code>QueryClient.fetchQuery()</code> å‡½æ•°</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Prefetch a query:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">prefetchQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Fetch a query:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fetchQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// é”™è¯¯å¤„ç†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="reactqueryerrorresetboundary-å’Œ-querycachereseterrorboundaries-è¢«-queryerrorresetboundary-å’Œ-usequeryerrorresetboundary-æ›¿ä»£"><code>ReactQueryErrorResetBoundary</code> å’Œ <code>QueryCache.resetErrorBoundaries()</code> è¢« <code>QueryErrorResetBoundary</code> å’Œ <code>useQueryErrorResetBoundary()</code> æ›¿ä»£<a class="hash-link" href="#reactqueryerrorresetboundary-å’Œ-querycachereseterrorboundaries-è¢«-queryerrorresetboundary-å’Œ-usequeryerrorresetboundary-æ›¿ä»£" title="Direct link to heading">â€‹</a></h3><p>å®ƒä»¬ä¸€èµ·æä¾›äº†ä¸ä»¥å‰ç›¸åŒçš„ä½“éªŒï¼Œä½†å¢åŠ äº†å¯¹æ‰‹åŠ¨é€‰æ‹©è¦é‡ç½®çš„ç»„ä»¶æ ‘çš„æ§åˆ¶ã€‚
æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ï¼š</p><ul><li><a href="/react-query-web-i18n/reference/QueryErrorResetBoundary">QueryErrorResetBoundary</a></li><li><a href="/react-query-web-i18n/reference/useQueryErrorResetBoundary">useQueryErrorResetBoundary</a></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="querycachegetquery-è¢«-querycachefind-æ›¿ä»£"><code>QueryCache.getQuery()</code> è¢« <code>QueryCache.find()</code> æ›¿ä»£<a class="hash-link" href="#querycachegetquery-è¢«-querycachefind-æ›¿ä»£" title="Direct link to heading">â€‹</a></h3><p><code>QueryCache.find()</code> ç°åœ¨ç”¨äºä»ä¸€ä¸ªç¼“å­˜ä¸­æŸ¥æ‰¾å•ä¸ªæŸ¥è¯¢</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="querycachegetqueries-åˆå¹¶è¿›-querycachefindall"><code>QueryCache.getQueries()</code> åˆå¹¶è¿› <code>QueryCache.findAll()</code><a class="hash-link" href="#querycachegetqueries-åˆå¹¶è¿›-querycachefindall" title="Direct link to heading">â€‹</a></h3><p><code>QueryCache.findAll()</code> ç°åœ¨ç”¨äºä»ä¸€ä¸ªç¼“å­˜ä¸­æŸ¥æ‰¾å¤šä¸ªæŸ¥è¯¢</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="querycacheisfetching-åˆå¹¶è¿›-queryclientisfetching"><code>QueryCache.isFetching</code> åˆå¹¶è¿› <code>QueryClient.isFetching()</code><a class="hash-link" href="#querycacheisfetching-åˆå¹¶è¿›-queryclientisfetching" title="Direct link to heading">â€‹</a></h3><p><strong>è¯·æ³¨æ„ï¼Œå®ƒç°åœ¨æ˜¯ä½œä¸ºå‡½æ•°è€Œä¸æ˜¯å±æ€§å­˜åœ¨</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="usequerycache-hook-è¢«-usequeryclient-hook-æ›¿ä»£"><code>useQueryCache</code> hook è¢« <code>useQueryClient</code> hook æ›¿ä»£<a class="hash-link" href="#usequerycache-hook-è¢«-usequeryclient-hook-æ›¿ä»£" title="Direct link to heading">â€‹</a></h3><p>å®ƒè¿”å›ä¸ºç»„ä»¶æ ‘ä¸­æä¾›çš„ <code>queryClient</code>ï¼Œé™¤äº†é‡å‘½åå¤–æ— éœ€è¿›è¡Œå¤ªå¤šè°ƒæ•´ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="æŸ¥è¯¢çš„é”®å€¼éƒ¨åˆ†ä¸å†ä½œä¸ºå‚æ•°è‡ªåŠ¨ä¼ é€’åˆ°æŸ¥è¯¢å‡½æ•°">æŸ¥è¯¢çš„é”®å€¼éƒ¨åˆ†ä¸å†ä½œä¸ºå‚æ•°è‡ªåŠ¨ä¼ é€’åˆ°æŸ¥è¯¢å‡½æ•°<a class="hash-link" href="#æŸ¥è¯¢çš„é”®å€¼éƒ¨åˆ†ä¸å†ä½œä¸ºå‚æ•°è‡ªåŠ¨ä¼ é€’åˆ°æŸ¥è¯¢å‡½æ•°" title="Direct link to heading">â€‹</a></h3><p>ç°åœ¨å»ºè®®ä½¿ç”¨é—­åŒ…å°†å‚æ•°ä¼ é€’ç»™æŸ¥è¯¢å‡½æ•°ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Old</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">_key</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchPost</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// New</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchPost</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å¦‚æœä»ç„¶åšæŒä¸ä½¿ç”¨é—­åŒ…ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ–°çš„ <code>QueryFunctionContext</code>ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchPost</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">queryKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="æ— é™æŸ¥è¯¢çš„åˆ†é¡µå‚æ•°ç°åœ¨ä½¿ç”¨-queryfunctioncontextpageparam-ä¼ é€’">æ— é™æŸ¥è¯¢çš„åˆ†é¡µå‚æ•°ç°åœ¨ä½¿ç”¨ <code>QueryFunctionContext.pageParam</code> ä¼ é€’<a class="hash-link" href="#æ— é™æŸ¥è¯¢çš„åˆ†é¡µå‚æ•°ç°åœ¨ä½¿ç”¨-queryfunctioncontextpageparam-ä¼ é€’" title="Direct link to heading">â€‹</a></h3><p>å®ƒä»¬ä»¥å‰æ˜¯ä½œä¸ºæŸ¥è¯¢å‡½æ•°ä¸­çš„æœ€åä¸€ä¸ªå‚æ•°æ·»åŠ çš„ï¼Œä½†äº‹å®è¯æ˜ï¼Œè¿™å¯¹äºå®ç°æŸäº›æ¨¡å¼å¾ˆæ˜¯å›°éš¾</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Old</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useInfiniteQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">_key</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> pageParam </span><span class="token parameter operator" style="color:rgb(137, 221, 255)">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pageParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// New</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useInfiniteQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> pageParam </span><span class="token parameter operator" style="color:rgb(137, 221, 255)">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:rgb(247, 140, 108)">0</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pageParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="ä¸æ¨èä½¿ç”¨-usepaginatedqueryè€Œæ˜¯åº”è¯¥é€‰æ‹©-keeppreviousdata-å‚æ•°">ä¸æ¨èä½¿ç”¨ <code>usePaginatedQuery()</code>ï¼Œè€Œæ˜¯åº”è¯¥é€‰æ‹© <code>keepPreviousData</code> å‚æ•°<a class="hash-link" href="#ä¸æ¨èä½¿ç”¨-usepaginatedqueryè€Œæ˜¯åº”è¯¥é€‰æ‹©-keeppreviousdata-å‚æ•°" title="Direct link to heading">â€‹</a></h3><p>æ–°çš„ <code>keepPreviousData</code> é€‰é¡¹å¯ç”¨äº <code>useQuery</code> å’Œ <code>useInfiniteQuery</code>ï¼Œå®ƒä»¬å¯¹äºæ•°æ®å…·æœ‰ç›¸åŒçš„â€œæ»åâ€æ•ˆæœï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useQuery </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> page </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;page&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">keepPreviousData</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="useinfinitequery-ç°åœ¨æ˜¯åŒå‘çš„"><code>useInfiniteQuery()</code> ç°åœ¨æ˜¯åŒå‘çš„<a class="hash-link" href="#useinfinitequery-ç°åœ¨æ˜¯åŒå‘çš„" title="Direct link to heading">â€‹</a></h3><p><code>useInfiniteQuery()</code> çš„ç›¸å…³æ¥å£å·²æ›´æ”¹ä¸ºå®Œå…¨æ”¯æŒåŒå‘æ— é™åˆ—è¡¨ã€‚</p><ul><li><code>options.getFetchMore</code> é‡å‘½åä¸º <code>options.getNextPageParam</code></li><li><code>queryResult.canFetchMore</code> é‡å‘½åä¸º <code>queryResult.hasNextPage</code></li><li><code>queryResult.fetchMore</code> é‡å‘½åä¸º <code>queryResult.fetchNextPage</code></li><li><code>queryResult.isFetchingMore</code> é‡å‘½åä¸º <code>queryResult.isFetchingNextPage</code></li><li>æ·»åŠ æ–°çš„ <code>options.getPreviousPageParam</code> é€‰é¡¹</li><li>æ·»åŠ æ–°çš„ <code>queryResult.hasPreviousPage</code> å±æ€§</li><li>æ·»åŠ æ–°çš„ <code>queryResult.fetchPreviousPage</code> å±æ€§</li><li>æ·»åŠ æ–°çš„ <code>queryResult.isFetchingPreviousPage</code></li><li>æ— å°½æŸ¥è¯¢çš„ <code>data</code> ç°åœ¨æ˜¯ä¸€ä¸ªåŒ…è£¹äº† <code>pages</code> å’Œ <code>pageParams</code> çš„<strong>å¯¹è±¡</strong>ï¼Œç”¨äºè·å–åˆ†é¡µæ•°æ®ï¼š <code>{ pages: [data, data, data], pageParams: [...]}</code></li></ul><p>ä¸€ä¸ªæ–¹å‘ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fetchNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hasNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  isFetchingNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useInfiniteQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;projects&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> pageParam </span><span class="token parameter operator" style="color:rgb(137, 221, 255)">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:rgb(247, 140, 108)">0</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchProjects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pageParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getNextPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">lastPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> lastPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">nextCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>åŒå‘ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fetchNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fetchPreviousPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hasNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hasPreviousPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  isFetchingNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  isFetchingPreviousPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useInfiniteQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;projects&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> pageParam </span><span class="token parameter operator" style="color:rgb(137, 221, 255)">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:rgb(247, 140, 108)">0</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchProjects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pageParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getNextPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">lastPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> lastPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">nextCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getPreviousPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">firstPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> firstPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prevCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>åå‘ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fetchNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hasNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  isFetchingNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useInfiniteQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;projects&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> pageParam </span><span class="token parameter operator" style="color:rgb(137, 221, 255)">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:rgb(247, 140, 108)">0</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetchProjects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pageParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">select</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token literal-property property">pages</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">reverse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token literal-property property">pageParams</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">pageParams</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">reverse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getNextPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">lastPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> lastPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">nextCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="ç°åœ¨æ— é™æŸ¥è¯¢æ•°æ®åŒ…å«é¡µé¢æ•°ç»„å’Œç”¨äºè·å–è¿™äº›é¡µé¢çš„-pageparams">ç°åœ¨ï¼Œæ— é™æŸ¥è¯¢æ•°æ®åŒ…å«é¡µé¢æ•°ç»„å’Œç”¨äºè·å–è¿™äº›é¡µé¢çš„ pageParams<a class="hash-link" href="#ç°åœ¨æ— é™æŸ¥è¯¢æ•°æ®åŒ…å«é¡µé¢æ•°ç»„å’Œç”¨äºè·å–è¿™äº›é¡µé¢çš„-pageparams" title="Direct link to heading">â€‹</a></h3><p>è¿™æ ·å¯ä»¥æ›´è½»æ¾åœ°æ“ä½œæ•°æ®å’Œé¡µé¢å‚æ•°ï¼Œä¾‹å¦‚ï¼Œåˆ é™¤æ•°æ®çš„ç¬¬ä¸€é¡µåŠå…¶ç›¸å…³çš„å‚æ•°ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">setQueryData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;projects&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">pages</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">pages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">slice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">pageParams</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">pageParams</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">slice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="usemutation-ç°åœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„"><code>useMutation</code> ç°åœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„<a class="hash-link" href="#usemutation-ç°åœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„" title="Direct link to heading">â€‹</a></h3><p>å°½ç®¡æ—§çš„æ¥å£ç»™æˆ‘ä»¬å¸¦æ¥äº†ç±»ä¼¼äºåˆæ¬¡å‘ç° <code>useState</code> æ—¶äº§ç”Ÿçš„é‚£ç§æ¸©æš–ä½†æ¨¡ç³Šçš„æ„Ÿè§‰ï¼Œä½†æ˜¯è¿™ç§æ„Ÿè§‰å¹¶æ²¡æœ‰æŒç»­å¤šä¹…ã€‚
ç°åœ¨ï¼Œå®ƒè¿”å›æ˜¯å•ä¸ªå¯¹è±¡ã€‚</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Old:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">mutate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> reset </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// New:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> mutate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> reset </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="mutationmutate-ä¸å†è¿”å›ä¸€ä¸ª-promise"><code>mutation.mutate</code> ä¸å†è¿”å›ä¸€ä¸ª Promise<a class="hash-link" href="#mutationmutate-ä¸å†è¿”å›ä¸€ä¸ª-promise" title="Direct link to heading">â€‹</a></h3><ul><li><code>[mutate]</code> å˜é‡å·²æ›¿æ¢ä¸º <code>mutation.mutate</code> å‡½æ•°</li><li>æ·»åŠ æ–°çš„ <code>mutation.mutateAsync</code> å‡½æ•°</li></ul><p>æˆ‘ä»¬æ”¶åˆ°äº†è®¸å¤šé—®é¢˜åé¦ˆï¼Œå› ä¸ºç”¨æˆ·å¸Œæœ›è¿™ä¸ª Promise çš„è¡Œä¸ºè¡¨ç°å¾—åƒä¸€ä¸ªæ­£å¸¸çš„ Promise</p><p>ç°åœ¨è¿™ä¸ª <code>mutate</code> å‡½æ•°è¢«åˆ†è§£ä¸º <code>mutate</code> å’Œ <code>mutateAsync</code> å‡½æ•°</p><p>å› è€Œï¼Œç°åœ¨ <code>mutate</code> å‡½æ•°çš„æ¥å£ä¸ºå›è°ƒå‡½æ•°å¼ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">addTodo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mutate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;todo&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">onSuccess</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">onError</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">onSettled</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;settled&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å¼‚æ­¥æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨ <code>mutateAsync</code> å‡½æ•°ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> mutateAsync </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">addTodo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mutateAsync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;todo&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;settled&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="usequery-é…ç½®æ–¹å¼æ”¹å˜"><code>useQuery</code> é…ç½®æ–¹å¼æ”¹å˜<a class="hash-link" href="#usequery-é…ç½®æ–¹å¼æ”¹å˜" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Old:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">config</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">staleTime</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">Infinity</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// New:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">staleTime</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">Infinity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="å¦‚æœè®¾ç½®åˆ™-queryoptionsenabled-é€‰é¡¹å¿…é¡»ä¸ºå¸ƒå°”å€¼-truefalse">å¦‚æœè®¾ç½®ï¼Œåˆ™ <code>QueryOptions.enabled</code> é€‰é¡¹å¿…é¡»ä¸ºå¸ƒå°”å€¼ (<code>true</code>/<code>false</code>)<a class="hash-link" href="#å¦‚æœè®¾ç½®åˆ™-queryoptionsenabled-é€‰é¡¹å¿…é¡»ä¸ºå¸ƒå°”å€¼-truefalse" title="Direct link to heading">â€‹</a></h3><p>ç°åœ¨ï¼Œ<code>enabled</code> çš„æŸ¥è¯¢é€‰é¡¹å°†ä»…åœ¨å€¼ä¸º <code>false</code> æ—¶ç¦ç”¨ã€‚
å¦‚æœéœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ <code>!!userId</code> æˆ– <code>Boolean(userId)</code> å¼ºåˆ¶è½¬æ¢å€¼ï¼Œå¦‚æœä¼ é€’äº†éå¸ƒå°”å€¼ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªæ˜æ˜¾çš„è¯­æ³•çš„é”™è¯¯ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="queryoptionsinitialstale-é€‰é¡¹å·²è¢«ç§»é™¤"><code>QueryOptions.initialStale</code> é€‰é¡¹å·²è¢«ç§»é™¤<a class="hash-link" href="#queryoptionsinitialstale-é€‰é¡¹å·²è¢«ç§»é™¤" title="Direct link to heading">â€‹</a></h3><p><code>initialStale</code> é€‰é¡¹å·²è¢«ç§»é™¤ï¼Œåˆå§‹çš„æ•°æ®ç°åœ¨è¢«è§†ä¸ºå¸¸è§„æ•°æ®ã€‚
è¿™æ„å‘³ç€ï¼Œå¦‚æœæä¾› <code>initialData</code>ï¼Œåˆ™é»˜è®¤æŸ¥è¯¢å°†åœ¨æŒ‚è½½æ—¶é‡æ–°è·å–ã€‚
å¦‚æœæ‚¨ä¸æƒ³è¯¥åŠ¨ä½œè¢«ç«‹å³æ‰§è¡Œï¼Œåˆ™å¯ä»¥å®šä¹‰ä¸€ä¸ª <code>staleTime</code>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="queryoptionsforcefetchonmount-é€‰é¡¹è¢«-refetchonmount-always-æ›¿ä»£"><code>QueryOptions.forceFetchOnMount</code> é€‰é¡¹è¢« <code>refetchOnMount: &#x27;always&#x27;</code> æ›¿ä»£<a class="hash-link" href="#queryoptionsforcefetchonmount-é€‰é¡¹è¢«-refetchonmount-always-æ›¿ä»£" title="Direct link to heading">â€‹</a></h3><p>è¯´å®è¯ï¼Œæˆ‘ä»¬å¢åŠ äº†å¤ªå¤šçš„ <code>refetchOn____</code> é€‰é¡¹ï¼Œæ‰€ä»¥è¿™åº”è¯¥èƒ½è§£å†³é—®é¢˜ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="queryoptionsrefetchonmount-é€‰é¡¹ç°åœ¨ä»…é€‚ç”¨äºå…¶çˆ¶ç»„ä»¶è€Œä¸æ˜¯æ‰€æœ‰æŸ¥è¯¢è§‚å¯Ÿè€…"><code>QueryOptions.refetchOnMount</code> é€‰é¡¹ç°åœ¨ä»…é€‚ç”¨äºå…¶çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æŸ¥è¯¢è§‚å¯Ÿè€…<a class="hash-link" href="#queryoptionsrefetchonmount-é€‰é¡¹ç°åœ¨ä»…é€‚ç”¨äºå…¶çˆ¶ç»„ä»¶è€Œä¸æ˜¯æ‰€æœ‰æŸ¥è¯¢è§‚å¯Ÿè€…" title="Direct link to heading">â€‹</a></h3><p>å½“ <code>refetchOnMount</code> è®¾ç½®ä¸º <code>false</code> æ—¶ï¼Œä»»ä½•å…¶ä»–ç»„ä»¶éƒ½ä¸èƒ½åœ¨æŒ‚è½½æ—¶é‡æ–°è·å–æ•°æ®ã€‚
åœ¨ v3 ä¸­ï¼Œåªæœ‰è®¾ç½®äº†è¯¥é€‰é¡¹çš„ç»„ä»¶ä¸ä¼šåœ¨æŒ‚è½½æ—¶é‡æ–°è·å–ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="queryoptionsqueryfnparamsfilter-å·²è¢«åˆ é™¤ä»¥æ”¯æŒæ–°çš„-queryfunctioncontext-å¯¹è±¡"><code>QueryOptions.queryFnParamsFilter</code> å·²è¢«åˆ é™¤ï¼Œä»¥æ”¯æŒæ–°çš„ <code>QueryFunctionContext</code> å¯¹è±¡<a class="hash-link" href="#queryoptionsqueryfnparamsfilter-å·²è¢«åˆ é™¤ä»¥æ”¯æŒæ–°çš„-queryfunctioncontext-å¯¹è±¡" title="Direct link to heading">â€‹</a></h3><p><code>queryFnParamsFilter</code> é€‰é¡¹å·²åˆ é™¤ï¼Œå› ä¸ºæŸ¥è¯¢å‡½æ•°ç°åœ¨é€šè¿‡è·å– <code>QueryFunctionContext</code> å¯¹è±¡è€Œä¸æ˜¯é€šè¿‡æŸ¥è¯¢é”®å€¼ã€‚</p><p>ç”±äº <code>QueryFunctionContext</code> è¿˜åŒ…å«æŸ¥è¯¢é”®å€¼ï¼Œå› æ­¤ä»å¯ä»¥åœ¨æŸ¥è¯¢å‡½æ•°æœ¬èº«ä¸­è¿‡æ»¤å‚æ•°ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="queryoptionsnotifyonstatuschange-é€‰é¡¹å·²è¢«-notifyonchangeprops-å’Œ-notifyonchangepropsexclusions-é€‰é¡¹æ›¿ä»£"><code>QueryOptions.notifyOnStatusChange</code> é€‰é¡¹å·²è¢« <code>notifyOnChangeProps</code> å’Œ <code>notifyOnChangePropsExclusions</code> é€‰é¡¹æ›¿ä»£<a class="hash-link" href="#queryoptionsnotifyonstatuschange-é€‰é¡¹å·²è¢«-notifyonchangeprops-å’Œ-notifyonchangepropsexclusions-é€‰é¡¹æ›¿ä»£" title="Direct link to heading">â€‹</a></h3><p>æœ‰äº†è¿™äº›æ–°é€‰é¡¹ï¼Œå¯ä»¥åœ¨æ›´ç»†è…»çš„ç¨‹åº¦ä¸Šæ¥é…ç½®ç»„ä»¶é‡æ–°æ¸²æŸ“çš„é€»è¾‘ã€‚</p><p>åªæœ‰å½“ <code>data</code> æˆ– <code>error</code> è¢«æ”¹å˜æ—¶é‡æ–°æ¸²æŸ“ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useQuery </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">User</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;user&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">notifyOnChangeProps</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;error&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token maybe-class-name">Username</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>åœ¨ <code>isStale</code> æ”¹å˜æ—¶å¿½ç•¥ï¼Œä¸è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useQuery </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">User</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;user&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">notifyOnChangePropsExclusions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;isStale&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token maybe-class-name">Username</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="queryresultclear-æ–¹æ³•é‡å‘½åä¸º-queryresultremove"><code>QueryResult.clear()</code> æ–¹æ³•é‡å‘½åä¸º <code>QueryResult.remove()</code><a class="hash-link" href="#queryresultclear-æ–¹æ³•é‡å‘½åä¸º-queryresultremove" title="Direct link to heading">â€‹</a></h3><p>å°½ç®¡å®ƒè¢«ç§°ä¸º&quot;clear&quot;ï¼Œä½†å®é™…ä¸Šåªæ˜¯ä»é«˜é€Ÿç¼“å­˜ä¸­åˆ é™¤äº†å•ä¸ªæŸ¥è¯¢ã€‚
ç°åœ¨ï¼Œè¯¥åç§°ä¸å…¶åŠŸèƒ½åŒ¹é…ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="queryresultupdatedat-æ‹†åˆ†ä¸º-queryresultdataupdatedat-å’Œ-queryresulterrorupdatedat-å±æ€§"><code>QueryResult.updatedAt</code> æ‹†åˆ†ä¸º <code>QueryResult.dataUpdatedAt</code> å’Œ <code>QueryResult.errorUpdatedAt</code> å±æ€§<a class="hash-link" href="#queryresultupdatedat-æ‹†åˆ†ä¸º-queryresultdataupdatedat-å’Œ-queryresulterrorupdatedat-å±æ€§" title="Direct link to heading">â€‹</a></h3><p>ç”±äºå¯ä»¥åŒæ—¶æ˜¾ç¤ºæ•°æ®å’Œé”™è¯¯ï¼Œå› æ­¤ <code>updatedAt</code> å±æ€§å·²æ‹†åˆ†ä¸º <code>dataUpdatedAt</code> å’Œ <code>errorUpdatedAt</code>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="setconsole-è¢«æ–°å‡½æ•°-setlogger-æ›¿ä»£"><code>setConsole()</code> è¢«æ–°å‡½æ•° <code>setLogger()</code> æ›¿ä»£<a class="hash-link" href="#setconsole-è¢«æ–°å‡½æ•°-setlogger-æ›¿ä»£" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> setLogger </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ä½¿ç”¨ Sentry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">setLogger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">error</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token maybe-class-name">Sentry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">captureException</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ä½¿ç”¨ Winston</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">setLogger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">winston</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">createLogger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="react-native-ä¸å†éœ€è¦é‡å†™-logger">React Native ä¸å†éœ€è¦é‡å†™ Logger<a class="hash-link" href="#react-native-ä¸å†éœ€è¦é‡å†™-logger" title="Direct link to heading">â€‹</a></h3><p>ä¸ºäº†é˜²æ­¢æŸ¥è¯¢å¤±è´¥æ—¶åœ¨ React Native ä¸­æ˜¾ç¤ºé”™è¯¯çš„ç•Œé¢ï¼Œå¿…é¡»æ‰‹åŠ¨æ›´æ”¹æ§åˆ¶å°ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> setConsole </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">setConsole</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">log</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">warn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">warn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">error</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">warn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>åœ¨ v3 ä¸­ï¼Œ<strong>React Query åœ¨ React Native ä¸­ä½¿ç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨åšåˆ°ä¸Šé¢è¿™ç‚¹</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="typescript-çš„ç±»å‹">Typescript çš„ç±»å‹<a class="hash-link" href="#typescript-çš„ç±»å‹" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="querystatus-çš„ç±»å‹å·²ç»ä»-enum-åˆ‡æ¢ä¸º-union-type"><code>QueryStatus</code> çš„ç±»å‹å·²ç»ä» <a href="https://www.typescriptlang.org/docs/handbook/enums.html#string-enums" target="_blank" rel="noopener noreferrer">enum</a> åˆ‡æ¢ä¸º <a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types" target="_blank" rel="noopener noreferrer">union type</a><a class="hash-link" href="#querystatus-çš„ç±»å‹å·²ç»ä»-enum-åˆ‡æ¢ä¸º-union-type" title="Direct link to heading">â€‹</a></h4><p>å› æ­¤ï¼Œå¦‚æœæ‚¨è¦æ ¹æ®<code>QueryStatus</code>æšä¸¾å±æ€§æ£€æŸ¥æŸ¥è¯¢æˆ–ä¿®æ”¹çš„çŠ¶æ€ï¼Œä½ ç°åœ¨å¿…é¡»æ£€æŸ¥å…¶å­—ç¬¦ä¸²å­—é¢é‡ï¼Œè€Œä¸æ˜¯ä»¥å‰çš„æšä¸¾å€¼ã€‚</p><p>å› æ­¤ï¼Œæ‚¨å¿…é¡»å°†æšä¸¾å±æ€§æ›´æ”¹ä¸ºå…¶ç­‰æ•ˆçš„å­—ç¬¦ä¸²æ–‡å­—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li><code>QueryStatus.Idle</code> -&gt; <code>&#x27;idle&#x27;</code></li><li><code>QueryStatus.Loading</code> -&gt; <code>&#x27;loading&#x27;</code></li><li><code>QueryStatus.Error</code> -&gt; <code>&#x27;error&#x27;</code></li><li><code>QueryStatus.Success</code> -&gt; <code>&#x27;success&#x27;</code></li></ul><div class="codeBlockContainer_I0IT language-diff theme-code-block"><div class="codeBlockContent_wNvx diff"><pre tabindex="0" class="prism-code language-diff codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> import { useQuery, QueryStatus } from &#x27;react-query&#x27;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> import { useQuery } from &#x27;react-query&#x27;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">const { data, status } = useQuery([&#x27;post&#x27;, id], () =&gt; fetchPost(id));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> if (status === QueryStatus.Loading) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> if (status === &#x27;loading&#x27;) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> if (status === QueryStatus.Error) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> if (status === &#x27;error&#x27;) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="æ–°ç‰¹æ€§">æ–°ç‰¹æ€§<a class="hash-link" href="#æ–°ç‰¹æ€§" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨">æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨<a class="hash-link" href="#æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨" title="Direct link to heading">â€‹</a></h3><p>ç°åœ¨ï¼Œ<code>useQuery</code> å’Œ <code>useInfiniteQuery</code> Hook åˆ†åˆ«å¸¦æœ‰ä¸€ä¸ª <code>select</code> é€‰é¡¹ï¼Œç”¨äºé€‰æ‹©æˆ–è½¬æ¢éƒ¨åˆ†æŸ¥è¯¢ç»“æœã€‚</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useQuery </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">User</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;user&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetchUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">select</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token maybe-class-name">Username</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å°† <code>notifyOnChangeProps</code> é€‰é¡¹è®¾ç½®ä¸º <code>[&#x27;data&#x27;ï¼Œ&#x27;error&#x27;]</code> ï¼Œä½¿å¾—ä»…åœ¨æ‰€é€‰æ•°æ®æ›´æ”¹æ—¶é‡æ–°æ¸²æŸ“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="usequeries-hookç”¨äºå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢"><code>useQueries()</code> hookï¼Œç”¨äºå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢<a class="hash-link" href="#usequeries-hookç”¨äºå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢" title="Direct link to heading">â€‹</a></h3><p>æƒ³åœ¨å¾ªç¯å†…è¿è¡Œ <code>useQuery</code> å—ï¼Ÿ
Hook è§„åˆ™è¯´ä¸ï¼Œä½†æ˜¯æœ‰äº†æ–°çš„ <code>useQueries()</code> hookï¼Œå¯ä»¥äº†ï¼</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useQueries </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Overview</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> results </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQueries</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token literal-property property">queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPost </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token literal-property property">queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPost </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ul</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> data </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> data </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">li key</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">li</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">ul</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="ä¿®æ”¹å¯¹é‡è¯•ç¦»çº¿çš„æ”¯æŒ">ä¿®æ”¹å¯¹é‡è¯•/ç¦»çº¿çš„æ”¯æŒ<a class="hash-link" href="#ä¿®æ”¹å¯¹é‡è¯•ç¦»çº¿çš„æ”¯æŒ" title="Direct link to heading">â€‹</a></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒReact Query ä¸ä¼šè‡ªåŠ¨é‡è¯•é”™è¯¯çš„ä¿®æ”¹ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ <code>retry</code> é€‰é¡¹ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> mutation </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">addTodo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">retry</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>å¦‚æœç”±äºè®¾å¤‡ç¦»çº¿è€Œå¯¼è‡´ä¿®æ”¹å¤±è´¥ï¼Œé‚£ä¹ˆå½“è®¾å¤‡é‡æ–°è¿æ¥æ—¶ï¼Œå®ƒä»¬å°†ä»¥ç›¸åŒçš„é¡ºåºé‡æ–°å°è¯•ã€‚</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="æŒä¹…åŒ–ä¿®æ”¹">æŒä¹…åŒ–ä¿®æ”¹<a class="hash-link" href="#æŒä¹…åŒ–ä¿®æ”¹" title="Direct link to heading">â€‹</a></h3><p>ç°åœ¨å¯ä»¥å°†ä¿®æ”¹æŒä¹…åŒ–åˆ°æ•°æ®åº“æˆ–å…¶ä»–ä»€ä¹ˆå­˜å‚¨æ–¹å¼ä¸­ï¼Œå¹¶åœ¨ä»¥åæ¢å¤ã€‚æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨<a href="/react-query-web-i18n/guides&amp;concepts/mutations">ä¿®æ”¹</a>ä¸­æ‰¾åˆ°ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="observer">Observer<a class="hash-link" href="#observer" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="queryobserver">QueryObserver<a class="hash-link" href="#queryobserver" title="Direct link to heading">â€‹</a></h4><p>QueryObserver å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œ/æˆ–ç›‘è§†ä¸€ä¸ªæŸ¥è¯¢ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> observer </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">QueryObserver</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> unsubscribe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> observer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="infinitequeryobserver">InfiniteQueryObserver<a class="hash-link" href="#infinitequeryobserver" title="Direct link to heading">â€‹</a></h4><p>InfiniteQueryObserver å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œ/æˆ–ç›‘è§†ä¸€ä¸ªæ— é™æŸ¥è¯¢ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> observer </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">InfiniteQueryObserver</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getNextPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">lastPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> allPages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> lastPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">nextCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">getPreviousPageParam</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">firstPage</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> allPages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> firstPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prevCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> unsubscribe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> observer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="queriesobserver">QueriesObserver<a class="hash-link" href="#queriesobserver" title="Direct link to heading">â€‹</a></h4><p>QueriesObserver å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œ/æˆ–ç›‘è§†å¤šä¸ªæŸ¥è¯¢ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> observer </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">QueriesObserver</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token literal-property property">queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPost </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">queryKey</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;post&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token literal-property property">queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPost </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> unsubscribe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> observer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="ä¸ºç‰¹å®šæŸ¥è¯¢ä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹">ä¸ºç‰¹å®šæŸ¥è¯¢/ä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹<a class="hash-link" href="#ä¸ºç‰¹å®šæŸ¥è¯¢ä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="æŸ¥è¯¢">æŸ¥è¯¢<a class="hash-link" href="#æŸ¥è¯¢" title="Direct link to heading">â€‹</a></h4><p><code>QueryClient.setQueryDefaults()</code> æ–¹æ³•å¯ç”¨äºä¸ºç‰¹å®šæŸ¥è¯¢è®¾ç½®é»˜è®¤é€‰é¡¹ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">setQueryDefaults</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">queryFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> fetchPosts </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Component</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useQuery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="ä¿®æ”¹">ä¿®æ”¹<a class="hash-link" href="#ä¿®æ”¹" title="Direct link to heading">â€‹</a></h4><p><code>QueryClient.setMutationDefaults()</code> æ–¹æ³•å¯ç”¨äºä¸ºç‰¹å®šä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">queryClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">setMutationDefaults</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;addPost&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">mutationFn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> addPost </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Component</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useMutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;addPost&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="useisfetching">useIsFetching()<a class="hash-link" href="#useisfetching" title="Direct link to heading">â€‹</a></h3><p>ç°åœ¨ï¼Œ<code>useIsFetching()</code> Hook å¯ä»¥æ¥æ”¶ä¸€äº›è¿‡æ»¤å™¨ï¼Œè¿™äº›è¿‡æ»¤å™¨å¯ç”¨äºä¾‹å¦‚ä»…æ˜¾ç¤ºæŸäº›æŸ¥è¯¢ç±»å‹çš„å¾®è°ƒï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> fetches </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useIsFetching</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;posts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="åˆ†ç¦»">åˆ†ç¦»<a class="hash-link" href="#åˆ†ç¦»" title="Direct link to heading">â€‹</a></h2><p>ç°åœ¨ï¼ŒReact Query çš„æ ¸å¿ƒä¸ React å®Œå…¨åˆ†ç¦»ï¼Œè¿™æ„å‘³ç€å®ƒä¹Ÿå¯ä»¥<strong>ç‹¬ç«‹ä½¿ç”¨æˆ–åœ¨å…¶ä»–æ¡†æ¶ä¸­ä½¿ç”¨</strong>ã€‚
ä½¿ç”¨ <code>react-query/core</code> å…¥å£ç‚¹ä»…å¯¼å…¥æ ¸å¿ƒåŠŸèƒ½ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">QueryClient</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;react-query/core&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="devtools-ç°åœ¨æ˜¯ä¸»ä»“åº“å’Œ-npm-è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†">Devtools ç°åœ¨æ˜¯ä¸»ä»“åº“å’Œ npm è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†<a class="hash-link" href="#devtools-ç°åœ¨æ˜¯ä¸»ä»“åº“å’Œ-npm-è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†" title="Direct link to heading">â€‹</a></h2><p>devtoolsç°åœ¨åŒ…å«åœ¨ <code>react-query</code> ä¸‹çš„ <code>react-query/devtools</code> ä¸­ã€‚
åªéœ€å°† <code>react-query-devtools</code> å¯¼å…¥æ›¿æ¢ä¸º <code>react-query/devtools</code> å³å¯</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/cangSDARM/react-query-web-i18n/versioned_docs/version-v3/guides&amp;concepts/migrating-to-react-query-3.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-14T14:10:11.000Z">9/14/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/react-query-web-i18n/guides&amp;concepts/does-this-replace-client-state"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">React Queryæ˜¯å¦ä¼š/å¯ä»¥å–ä»£Reduxï¼ŒMobXæˆ–å…¶ä»–å…¨å±€çŠ¶æ€ç®¡ç†å™¨ï¼Ÿ</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/react-query-web-i18n/plugins/broadcast-query-client"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">broadcastQueryClient (Experimental)</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#æ¦‚è§ˆ" class="table-of-contents__link toc-highlight">æ¦‚è§ˆ</a></li><li><a href="#ç ´åæ€§ä¿®æ”¹" class="table-of-contents__link toc-highlight">ç ´åæ€§ä¿®æ”¹</a><ul><li><a href="#querycache-å·²è¢«åˆ†è§£è¿›-queryclient-å’Œè¾ƒä½çº§åˆ«çš„-querycache-å’Œ-mutationcache-å®ä¾‹" class="table-of-contents__link toc-highlight">QueryCache å·²è¢«åˆ†è§£è¿› <code>QueryClient</code> å’Œè¾ƒä½çº§åˆ«çš„ <code>QueryCache</code> å’Œ <code>MutationCache</code> å®ä¾‹ã€‚</a></li><li><a href="#reactqueryconfigprovider-å’Œ-reactquerycacheprovider-å·²è¢«-queryclientprovider-æ›¿ä»£" class="table-of-contents__link toc-highlight"><code>ReactQueryConfigProvider</code> å’Œ <code>ReactQueryCacheProvider</code> å·²è¢« <code>QueryClientProvider</code> æ›¿ä»£</a></li><li><a href="#é»˜è®¤çš„-querycache-å·²è¢«ç§»é™¤å½»åº•" class="table-of-contents__link toc-highlight">é»˜è®¤çš„ <code>QueryCache</code> å·²è¢«ç§»é™¤ï¼Œå½»åº•</a></li><li><a href="#ä¸æ¨èä½¿ç”¨çš„-makequerycache-å·²è¢«åˆ é™¤" class="table-of-contents__link toc-highlight">ä¸æ¨èä½¿ç”¨çš„ <code>makeQueryCache</code> å·²è¢«åˆ é™¤</a></li><li><a href="#querycacheprefetchquery-è¢«-queryclientprefetchquery-æ›¿ä»£" class="table-of-contents__link toc-highlight"><code>QueryCache.prefetchQuery()</code> è¢« <code>QueryClient.prefetchQuery()</code> æ›¿ä»£</a></li><li><a href="#reactqueryerrorresetboundary-å’Œ-querycachereseterrorboundaries-è¢«-queryerrorresetboundary-å’Œ-usequeryerrorresetboundary-æ›¿ä»£" class="table-of-contents__link toc-highlight"><code>ReactQueryErrorResetBoundary</code> å’Œ <code>QueryCache.resetErrorBoundaries()</code> è¢« <code>QueryErrorResetBoundary</code> å’Œ <code>useQueryErrorResetBoundary()</code> æ›¿ä»£</a></li><li><a href="#querycachegetquery-è¢«-querycachefind-æ›¿ä»£" class="table-of-contents__link toc-highlight"><code>QueryCache.getQuery()</code> è¢« <code>QueryCache.find()</code> æ›¿ä»£</a></li><li><a href="#querycachegetqueries-åˆå¹¶è¿›-querycachefindall" class="table-of-contents__link toc-highlight"><code>QueryCache.getQueries()</code> åˆå¹¶è¿› <code>QueryCache.findAll()</code></a></li><li><a href="#querycacheisfetching-åˆå¹¶è¿›-queryclientisfetching" class="table-of-contents__link toc-highlight"><code>QueryCache.isFetching</code> åˆå¹¶è¿› <code>QueryClient.isFetching()</code></a></li><li><a href="#usequerycache-hook-è¢«-usequeryclient-hook-æ›¿ä»£" class="table-of-contents__link toc-highlight"><code>useQueryCache</code> hook è¢« <code>useQueryClient</code> hook æ›¿ä»£</a></li><li><a href="#æŸ¥è¯¢çš„é”®å€¼éƒ¨åˆ†ä¸å†ä½œä¸ºå‚æ•°è‡ªåŠ¨ä¼ é€’åˆ°æŸ¥è¯¢å‡½æ•°" class="table-of-contents__link toc-highlight">æŸ¥è¯¢çš„é”®å€¼éƒ¨åˆ†ä¸å†ä½œä¸ºå‚æ•°è‡ªåŠ¨ä¼ é€’åˆ°æŸ¥è¯¢å‡½æ•°</a></li><li><a href="#æ— é™æŸ¥è¯¢çš„åˆ†é¡µå‚æ•°ç°åœ¨ä½¿ç”¨-queryfunctioncontextpageparam-ä¼ é€’" class="table-of-contents__link toc-highlight">æ— é™æŸ¥è¯¢çš„åˆ†é¡µå‚æ•°ç°åœ¨ä½¿ç”¨ <code>QueryFunctionContext.pageParam</code> ä¼ é€’</a></li><li><a href="#ä¸æ¨èä½¿ç”¨-usepaginatedqueryè€Œæ˜¯åº”è¯¥é€‰æ‹©-keeppreviousdata-å‚æ•°" class="table-of-contents__link toc-highlight">ä¸æ¨èä½¿ç”¨ <code>usePaginatedQuery()</code>ï¼Œè€Œæ˜¯åº”è¯¥é€‰æ‹© <code>keepPreviousData</code> å‚æ•°</a></li><li><a href="#useinfinitequery-ç°åœ¨æ˜¯åŒå‘çš„" class="table-of-contents__link toc-highlight"><code>useInfiniteQuery()</code> ç°åœ¨æ˜¯åŒå‘çš„</a></li><li><a href="#ç°åœ¨æ— é™æŸ¥è¯¢æ•°æ®åŒ…å«é¡µé¢æ•°ç»„å’Œç”¨äºè·å–è¿™äº›é¡µé¢çš„-pageparams" class="table-of-contents__link toc-highlight">ç°åœ¨ï¼Œæ— é™æŸ¥è¯¢æ•°æ®åŒ…å«é¡µé¢æ•°ç»„å’Œç”¨äºè·å–è¿™äº›é¡µé¢çš„ pageParams</a></li><li><a href="#usemutation-ç°åœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„" class="table-of-contents__link toc-highlight"><code>useMutation</code> ç°åœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„</a></li><li><a href="#mutationmutate-ä¸å†è¿”å›ä¸€ä¸ª-promise" class="table-of-contents__link toc-highlight"><code>mutation.mutate</code> ä¸å†è¿”å›ä¸€ä¸ª Promise</a></li><li><a href="#usequery-é…ç½®æ–¹å¼æ”¹å˜" class="table-of-contents__link toc-highlight"><code>useQuery</code> é…ç½®æ–¹å¼æ”¹å˜</a></li><li><a href="#å¦‚æœè®¾ç½®åˆ™-queryoptionsenabled-é€‰é¡¹å¿…é¡»ä¸ºå¸ƒå°”å€¼-truefalse" class="table-of-contents__link toc-highlight">å¦‚æœè®¾ç½®ï¼Œåˆ™ <code>QueryOptions.enabled</code> é€‰é¡¹å¿…é¡»ä¸ºå¸ƒå°”å€¼ (<code>true</code>/<code>false</code>)</a></li><li><a href="#queryoptionsinitialstale-é€‰é¡¹å·²è¢«ç§»é™¤" class="table-of-contents__link toc-highlight"><code>QueryOptions.initialStale</code> é€‰é¡¹å·²è¢«ç§»é™¤</a></li><li><a href="#queryoptionsforcefetchonmount-é€‰é¡¹è¢«-refetchonmount-always-æ›¿ä»£" class="table-of-contents__link toc-highlight"><code>QueryOptions.forceFetchOnMount</code> é€‰é¡¹è¢« <code>refetchOnMount: &#39;always&#39;</code> æ›¿ä»£</a></li><li><a href="#queryoptionsrefetchonmount-é€‰é¡¹ç°åœ¨ä»…é€‚ç”¨äºå…¶çˆ¶ç»„ä»¶è€Œä¸æ˜¯æ‰€æœ‰æŸ¥è¯¢è§‚å¯Ÿè€…" class="table-of-contents__link toc-highlight"><code>QueryOptions.refetchOnMount</code> é€‰é¡¹ç°åœ¨ä»…é€‚ç”¨äºå…¶çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æŸ¥è¯¢è§‚å¯Ÿè€…</a></li><li><a href="#queryoptionsqueryfnparamsfilter-å·²è¢«åˆ é™¤ä»¥æ”¯æŒæ–°çš„-queryfunctioncontext-å¯¹è±¡" class="table-of-contents__link toc-highlight"><code>QueryOptions.queryFnParamsFilter</code> å·²è¢«åˆ é™¤ï¼Œä»¥æ”¯æŒæ–°çš„ <code>QueryFunctionContext</code> å¯¹è±¡</a></li><li><a href="#queryoptionsnotifyonstatuschange-é€‰é¡¹å·²è¢«-notifyonchangeprops-å’Œ-notifyonchangepropsexclusions-é€‰é¡¹æ›¿ä»£" class="table-of-contents__link toc-highlight"><code>QueryOptions.notifyOnStatusChange</code> é€‰é¡¹å·²è¢« <code>notifyOnChangeProps</code> å’Œ <code>notifyOnChangePropsExclusions</code> é€‰é¡¹æ›¿ä»£</a></li><li><a href="#queryresultclear-æ–¹æ³•é‡å‘½åä¸º-queryresultremove" class="table-of-contents__link toc-highlight"><code>QueryResult.clear()</code> æ–¹æ³•é‡å‘½åä¸º <code>QueryResult.remove()</code></a></li><li><a href="#queryresultupdatedat-æ‹†åˆ†ä¸º-queryresultdataupdatedat-å’Œ-queryresulterrorupdatedat-å±æ€§" class="table-of-contents__link toc-highlight"><code>QueryResult.updatedAt</code> æ‹†åˆ†ä¸º <code>QueryResult.dataUpdatedAt</code> å’Œ <code>QueryResult.errorUpdatedAt</code> å±æ€§</a></li><li><a href="#setconsole-è¢«æ–°å‡½æ•°-setlogger-æ›¿ä»£" class="table-of-contents__link toc-highlight"><code>setConsole()</code> è¢«æ–°å‡½æ•° <code>setLogger()</code> æ›¿ä»£</a></li><li><a href="#react-native-ä¸å†éœ€è¦é‡å†™-logger" class="table-of-contents__link toc-highlight">React Native ä¸å†éœ€è¦é‡å†™ Logger</a></li><li><a href="#typescript-çš„ç±»å‹" class="table-of-contents__link toc-highlight">Typescript çš„ç±»å‹</a></li></ul></li><li><a href="#æ–°ç‰¹æ€§" class="table-of-contents__link toc-highlight">æ–°ç‰¹æ€§</a><ul><li><a href="#æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨" class="table-of-contents__link toc-highlight">æŸ¥è¯¢æ•°æ®é€‰æ‹©å™¨</a></li><li><a href="#usequeries-hookç”¨äºå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢" class="table-of-contents__link toc-highlight"><code>useQueries()</code> hookï¼Œç”¨äºå¯å˜é•¿åº¦çš„å¹¶è¡ŒæŸ¥è¯¢</a></li><li><a href="#ä¿®æ”¹å¯¹é‡è¯•ç¦»çº¿çš„æ”¯æŒ" class="table-of-contents__link toc-highlight">ä¿®æ”¹å¯¹é‡è¯•/ç¦»çº¿çš„æ”¯æŒ</a></li><li><a href="#æŒä¹…åŒ–ä¿®æ”¹" class="table-of-contents__link toc-highlight">æŒä¹…åŒ–ä¿®æ”¹</a></li><li><a href="#observer" class="table-of-contents__link toc-highlight">Observer</a></li><li><a href="#ä¸ºç‰¹å®šæŸ¥è¯¢ä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹" class="table-of-contents__link toc-highlight">ä¸ºç‰¹å®šæŸ¥è¯¢/ä¿®æ”¹è®¾ç½®é»˜è®¤é€‰é¡¹</a></li><li><a href="#useisfetching" class="table-of-contents__link toc-highlight">useIsFetching()</a></li></ul></li><li><a href="#åˆ†ç¦»" class="table-of-contents__link toc-highlight">åˆ†ç¦»</a></li><li><a href="#devtools-ç°åœ¨æ˜¯ä¸»ä»“åº“å’Œ-npm-è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†" class="table-of-contents__link toc-highlight">Devtools ç°åœ¨æ˜¯ä¸»ä»“åº“å’Œ npm è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Web Community.</div></div></div></footer></div>
<script src="/react-query-web-i18n/assets/js/runtime~main.f245a536.js"></script>
<script src="/react-query-web-i18n/assets/js/main.53ec0a45.js"></script>
</body>
</html>